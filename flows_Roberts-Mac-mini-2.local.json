[
    {
        "id": "f30f9979.39f178",
        "type": "tab",
        "label": "Sun Timers",
        "disabled": false,
        "info": ""
    },
    {
        "id": "f9337f21.0eab78",
        "type": "tab",
        "label": "Lights",
        "disabled": false,
        "info": ""
    },
    {
        "id": "3602fa877f6615d5",
        "type": "tab",
        "label": "Blinds",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "2984f0164b9bafb7",
        "type": "tab",
        "label": "Doors",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "5ea7da533109f7d2",
        "type": "tab",
        "label": "Temperature",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "3cee340729aa7e67",
        "type": "tab",
        "label": "Data Archival",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c1c7f362.7de41",
        "type": "subflow",
        "name": "Time Converter",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 260,
                "y": 480,
                "wires": [
                    {
                        "id": "ae545d5b.975008"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 540,
                "y": 480,
                "wires": [
                    {
                        "id": "ae545d5b.975008",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99",
        "status": {
            "x": 540,
            "y": 540,
            "wires": [
                {
                    "id": "ae545d5b.975008",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "eaca82ad.4ed06",
        "type": "subflow",
        "name": "Notify Rob",
        "info": "\n## Required Inputs\n\n- `msg.payload`\n    The message of the notification, supports a few html tags\n\n## Optional Inputs\n\n- `msg.topic`\n    This will be used as the title of the notifcation if Title is not set\n- `msg.image`\n    The URL of the image in notification. Local file path or http(s) url\n- `msg.url`\n    Can add an url to your notification\n- `msg.url_title`\n    Can set the title of the url\n- `msg.priority`\n    -2/-1/1/2. Default: 0 (normal)\n    If the priority is 2 (emergency), you should provide msg.retry and msg.expire.\n    see explains\n- `msg.device`\n    Default for all device if not provided. Seprated by a comma\n- `msg.sound`\n    Name of the notification sound, see the list\n- `msg.timestamp`\n    An unix timestamp to specific the date time of your notification ",
        "category": "",
        "in": [
            {
                "x": 40,
                "y": 80,
                "wires": [
                    {
                        "id": "c044ca5b.081a6"
                    }
                ]
            }
        ],
        "out": [],
        "env": [
            {
                "name": "device",
                "type": "str",
                "value": "Robs-Phone"
            }
        ],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-mobile-phone"
    },
    {
        "id": "7435c4c5.81ec14",
        "type": "subflow",
        "name": "Notify Leah",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 140,
                "y": 80,
                "wires": [
                    {
                        "id": "e188e99ef579210b"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#3FADB5",
        "icon": "font-awesome/fa-mobile-phone"
    },
    {
        "id": "c79ec61c.5274a8",
        "type": "subflow",
        "name": "Main floor motion is enabled",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 120,
                "wires": [
                    {
                        "id": "d1470657.61394"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 380,
                "y": 300,
                "wires": [
                    {
                        "id": "fdbf5834.ae9ad8",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "4c7c8cd1.6a2a1c",
        "type": "subflow",
        "name": "My Zone Active",
        "info": " Zone Active\n \nZA is a contact and motion sensor aggregator. \n\nIt will transmit the active message when a motion sensor goes active or when a contact sensor changes state. \n\n After a configurable delay, it will transmit a  deactivated message.\n \n Contact sensors are considered disabled after the \"sensor reset delay \" elapsed time passes. \n \n Sensor reset delay and activity reset delay are in seconds.",
        "category": "",
        "in": [
            {
                "x": 300,
                "y": 200,
                "wires": [
                    {
                        "id": "5e909849.a5ede"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1340,
                "y": 520,
                "wires": [
                    {
                        "id": "cfb39ab9.45346",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1340,
                "y": 580,
                "wires": [
                    {
                        "id": "f9fb7202.670248",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [
            {
                "name": "Zone Name",
                "type": "str",
                "value": "Motion zone"
            },
            {
                "name": "sensor_reset_delay",
                "type": "num",
                "value": "30"
            },
            {
                "name": "activity_reset_delay",
                "type": "num",
                "value": "300"
            }
        ],
        "color": "#DDAA99",
        "status": {
            "x": 1240,
            "y": 940,
            "wires": [
                {
                    "id": "baa794b2.a49bd",
                    "port": 0
                },
                {
                    "id": "3adf6856.200d98",
                    "port": 0
                },
                {
                    "id": "6214c0ab.73eb08",
                    "port": 0
                },
                {
                    "id": "febb9c0d.c5d6e8",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "30a7f92d.9fbe16",
        "type": "subflow",
        "name": "Lutron Decoder",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 100,
                "y": 120,
                "wires": [
                    {
                        "id": "632a01bf.d36c38"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1340,
                "y": 100,
                "wires": [
                    {
                        "id": "9332a190.b5b628",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "4937c23770576172",
        "type": "subflow",
        "name": "Exclude Lights from Auto-CT",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 260,
                "y": 200,
                "wires": []
            }
        ],
        "out": [
            {
                "x": 820,
                "y": 200,
                "wires": []
            },
            {
                "x": 820,
                "y": 120,
                "wires": [
                    {
                        "id": "4937c23770576172",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "1090998370659d02",
        "type": "subflow",
        "name": "Notify Family",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "4972c17de3d83982"
                    },
                    {
                        "id": "f34d939765aa04c0"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "meta": {},
        "color": "#3FADB5",
        "icon": "node-red/bridge.svg"
    },
    {
        "id": "83269420e2cb55e4",
        "type": "group",
        "z": "2984f0164b9bafb7",
        "name": "Keeps a count of what doors are open or closed.",
        "style": {
            "label": true
        },
        "nodes": [
            "5f66bdf9a5df378e",
            "fcf3fde3acde20c4",
            "ccc007c9c6a678ac",
            "14a29f24f119cbfd",
            "5fd3d630479d46fe",
            "1988a394294549f4"
        ],
        "x": 244,
        "y": 479
    },
    {
        "id": "dbe1dc0e31a5fb56",
        "type": "group",
        "z": "5ea7da533109f7d2",
        "name": "Shut off HVAC when doors are open",
        "style": {
            "label": true
        },
        "nodes": [
            "0143764a4fa79a37",
            "522ca8033f93cc49",
            "d0beae73fc634098",
            "ec8c43b734b488bd",
            "63a4250f7ea57a4c",
            "cdcebad23752ae23",
            "7752bf1acef47bed",
            "be08985bac81bcb1",
            "e8d25bbe2111ea4c",
            "91531534703e670d",
            "77fd588680815925",
            "e22bc785bf7b0520",
            "7e946ef4a2d3c2fe",
            "2648b0e2f1734710",
            "f462e420c508034e",
            "fb7a5616028de8b7",
            "65181a2e8282575e",
            "cc53a25038807fc2",
            "3f71a14071503991",
            "17055fb592980387",
            "3eb370d603c80f68",
            "bd0d74f29ece1dcd",
            "fc570f7299eb205c",
            "c8062adaf3fbf8cf",
            "33e506e537a0af84",
            "5c6e34be82fe0618"
        ],
        "x": 184,
        "y": 1273
    },
    {
        "id": "c8062adaf3fbf8cf",
        "type": "group",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "Trigger Notification",
        "style": {
            "label": true
        },
        "nodes": [
            "ad803091f2f4400c"
        ],
        "x": 764,
        "y": 1299
    },
    {
        "id": "33e506e537a0af84",
        "type": "group",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "Manually control HVAC",
        "style": {
            "label": true,
            "label-position": "sw"
        },
        "nodes": [
            "14f0cde26c936f8c",
            "89a094886fec2498"
        ],
        "x": 1094,
        "y": 1759
    },
    {
        "id": "c6f15bd3bae34137",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "x": 360,
        "y": 920,
        "wires": [
            [
                "82929842.1531"
            ]
        ]
    },
    {
        "id": "3d10086a6a0f415f",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "x": 1260,
        "y": 1580,
        "wires": [
            [
                "a0f2d6e.daab828",
                "407e2a78.c9971c"
            ]
        ]
    },
    {
        "id": "9708140dd46c678d",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "x": 1260,
        "y": 1680,
        "wires": [
            [
                "a0f2d6e.daab828",
                "407e2a78.c9971c"
            ]
        ]
    },
    {
        "id": "cdce099a16e20aab",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "d": true,
        "x": 760,
        "y": 3180,
        "wires": [
            [
                "820b94d67933b2ef"
            ]
        ]
    },
    {
        "id": "a82371ccd38f40e5",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "d": true,
        "x": 1620,
        "y": 3400,
        "wires": [
            [
                "4abace46d88d5d82"
            ]
        ]
    },
    {
        "id": "17055fb592980387",
        "type": "junction",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "x": 1430,
        "y": 1660,
        "wires": [
            [
                "63a4250f7ea57a4c",
                "be08985bac81bcb1"
            ]
        ]
    },
    {
        "id": "90aea5fd83ba6ac4",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "d": true,
        "x": 645,
        "y": 1341,
        "wires": [
            [
                "ba0630734df9353f"
            ]
        ]
    },
    {
        "id": "3eb370d603c80f68",
        "type": "junction",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "x": 580,
        "y": 1700,
        "wires": [
            [
                "fb7a5616028de8b7"
            ]
        ]
    },
    {
        "id": "24bb8f272f701383",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "x": 700,
        "y": 1960,
        "wires": [
            [
                "7bcf989a027b91b9",
                "6e8c902afa929ee3"
            ]
        ]
    },
    {
        "id": "1e3f611957300a48",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "x": 1280,
        "y": 1960,
        "wires": [
            [
                "5ae6d9c9a3efb51b",
                "69d03cb9650a7a36"
            ]
        ]
    },
    {
        "id": "1f64cf98b7b984de",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "x": 1280,
        "y": 2060,
        "wires": [
            [
                "5ae6d9c9a3efb51b",
                "69d03cb9650a7a36"
            ]
        ]
    },
    {
        "id": "156fcd5f73bfc8b6",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "x": 700,
        "y": 2000,
        "wires": [
            [
                "84150709b87b217b",
                "6e8c902afa929ee3"
            ]
        ]
    },
    {
        "id": "18b6045b22c4cc73",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "x": 660,
        "y": 1620,
        "wires": [
            [
                "1ebe7fe71271b214",
                "ad06d2e528474b01"
            ]
        ]
    },
    {
        "id": "7dd8873a8c61588a",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "x": 660,
        "y": 1580,
        "wires": [
            [
                "51cd2c0885dc17a8",
                "1ebe7fe71271b214"
            ]
        ]
    },
    {
        "id": "bd0d74f29ece1dcd",
        "type": "junction",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "x": 660,
        "y": 1540,
        "wires": [
            [
                "cdcebad23752ae23",
                "e8d25bbe2111ea4c"
            ]
        ]
    },
    {
        "id": "fc570f7299eb205c",
        "type": "junction",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "x": 580,
        "y": 1600,
        "wires": [
            [
                "cdcebad23752ae23",
                "e8d25bbe2111ea4c"
            ]
        ]
    },
    {
        "id": "4f17c56984653df7",
        "type": "junction",
        "z": "f9337f21.0eab78",
        "x": 740,
        "y": 2360,
        "wires": [
            [
                "56921e7715f04b33",
                "a627786208b7b083"
            ]
        ]
    },
    {
        "id": "252d4ef4.c14b6a",
        "type": "hubitat config",
        "name": "Hubitat",
        "usetls": false,
        "host": "172.16.0.5",
        "port": "80",
        "appId": "14",
        "nodeRedServer": "http://172.16.0.25:1880",
        "webhookPath": "/hubitat/webhook",
        "autoRefresh": false,
        "useWebsocket": false,
        "colorEnabled": false,
        "color": "#000000"
    },
    {
        "id": "96c207ac.2237a8",
        "type": "position-config",
        "name": "Home",
        "isValide": "true",
        "longitude": "0",
        "latitude": "0",
        "angleType": "deg",
        "timeZoneOffset": "99",
        "timeZoneDST": "0",
        "stateTimeFormat": "3",
        "stateDateFormat": "12"
    },
    {
        "id": "d2fcc025.17ad7",
        "type": "pushover-keys",
        "name": "Robacarp"
    },
    {
        "id": "b9350de11f714bc2",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#cdcace",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Oikia",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "true",
            "allowTempTheme": "true",
            "dateFormat": "YYYY/MM/DD",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "5c890404fb72eb59",
        "type": "ui_tab",
        "name": "Temperature",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "e735a89b7a9ee10c",
        "type": "ui_group",
        "name": "Bedrooms",
        "tab": "5c890404fb72eb59",
        "order": 1,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "d0a30fbf02a8ceb5",
        "type": "ui_spacer",
        "z": "5ea7da533109f7d2",
        "name": "spacer",
        "group": "e735a89b7a9ee10c",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "21b7c61d0303ac49",
        "type": "postgreSQLConfig",
        "name": "",
        "host": "127.0.0.1",
        "hostFieldType": "str",
        "port": "5432",
        "portFieldType": "num",
        "database": "robert",
        "databaseFieldType": "str",
        "ssl": "false",
        "sslFieldType": "bool",
        "max": "5",
        "maxFieldType": "num",
        "idle": "1000",
        "idleFieldType": "num",
        "connectionTimeout": "10000",
        "connectionTimeoutFieldType": "num",
        "user": "",
        "userFieldType": "str",
        "password": "",
        "passwordFieldType": "str"
    },
    {
        "id": "aa0d64a0.a2b408",
        "type": "comment",
        "z": "c1c7f362.7de41",
        "name": "Time Zone Offset",
        "info": "",
        "x": 400,
        "y": 360,
        "wires": []
    },
    {
        "id": "a0e70412.49cd3",
        "type": "comment",
        "z": "c1c7f362.7de41",
        "name": "ms -> s",
        "info": "",
        "x": 370,
        "y": 320,
        "wires": []
    },
    {
        "id": "f207fd86.a5521",
        "type": "comment",
        "z": "c1c7f362.7de41",
        "name": "seconds since midnight",
        "info": "",
        "x": 420,
        "y": 400,
        "wires": []
    },
    {
        "id": "ba6ff9d9.4f1458",
        "type": "comment",
        "z": "c1c7f362.7de41",
        "name": "hours since midnight",
        "info": "",
        "x": 410,
        "y": 440,
        "wires": []
    },
    {
        "id": "ae545d5b.975008",
        "type": "change",
        "z": "c1c7f362.7de41",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload / 1000",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload - (3600 * 6)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload % 86400",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload / 3600",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "c044ca5b.081a6",
        "type": "change",
        "z": "eaca82ad.4ed06",
        "name": "Default Title",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "topic and topic != \"\" ? topic : \"Frontier Pl\"",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 190,
        "y": 80,
        "wires": [
            [
                "6649cfa664feeb1f"
            ]
        ]
    },
    {
        "id": "43ed4749.b7752",
        "type": "pushover api",
        "z": "eaca82ad.4ed06",
        "keys": "d2fcc025.17ad7",
        "title": "",
        "name": "",
        "x": 540,
        "y": 80,
        "wires": []
    },
    {
        "id": "6649cfa664feeb1f",
        "type": "change",
        "z": "eaca82ad.4ed06",
        "name": "Set Robs Phone",
        "rules": [
            {
                "t": "set",
                "p": "device",
                "pt": "msg",
                "to": "device",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 380,
        "y": 80,
        "wires": [
            [
                "43ed4749.b7752"
            ]
        ]
    },
    {
        "id": "f4a49bd9.f676f8",
        "type": "pushover api",
        "z": "7435c4c5.81ec14",
        "keys": "d2fcc025.17ad7",
        "title": "",
        "name": "",
        "x": 680,
        "y": 80,
        "wires": []
    },
    {
        "id": "d97f61592ef01109",
        "type": "change",
        "z": "7435c4c5.81ec14",
        "name": "Target Leahs Phone",
        "rules": [
            {
                "t": "set",
                "p": "device",
                "pt": "msg",
                "to": "Leahs-Phone",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 80,
        "wires": [
            [
                "f4a49bd9.f676f8"
            ]
        ]
    },
    {
        "id": "e188e99ef579210b",
        "type": "change",
        "z": "7435c4c5.81ec14",
        "name": "Default Title",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "topic and topic != \"\" ? topic : \"Frontier Pl\"",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 270,
        "y": 80,
        "wires": [
            [
                "d97f61592ef01109"
            ]
        ]
    },
    {
        "id": "3cca5a12.e156b6",
        "type": "switch",
        "z": "c79ec61c.5274a8",
        "name": "is enabled",
        "property": "payload.currentValue",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 200,
        "wires": [
            [
                "fdbf5834.ae9ad8"
            ]
        ]
    },
    {
        "id": "75cdf7ec.d90a48",
        "type": "hubitat device",
        "z": "c79ec61c.5274a8",
        "name": "Main Floor Motion Master",
        "server": "252d4ef4.c14b6a",
        "deviceId": "877",
        "attribute": "switch",
        "sendEvent": false,
        "x": 270,
        "y": 200,
        "wires": [
            [
                "3cca5a12.e156b6"
            ]
        ]
    },
    {
        "id": "d1470657.61394",
        "type": "change",
        "z": "c79ec61c.5274a8",
        "name": "Store payload",
        "rules": [
            {
                "t": "set",
                "p": "sent_payload",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 120,
        "wires": [
            [
                "75cdf7ec.d90a48"
            ]
        ]
    },
    {
        "id": "fdbf5834.ae9ad8",
        "type": "change",
        "z": "c79ec61c.5274a8",
        "name": "ReStore payload",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "sent_payload",
                "tot": "msg"
            },
            {
                "t": "delete",
                "p": "sent_payload",
                "pt": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 230,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "baa794b2.a49bd",
        "type": "change",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Active sensor count",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "count  & \" \" & payload & \" sensors\"",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 980,
        "wires": [
            []
        ]
    },
    {
        "id": "f9fb7202.670248",
        "type": "trigger",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Activity reset",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "5",
        "extend": true,
        "overrideDelay": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1110,
        "y": 580,
        "wires": [
            [
                "10373673.0c7d0a"
            ]
        ]
    },
    {
        "id": "f95fc416.12cdb8",
        "type": "switch",
        "z": "4c7c8cd1.6a2a1c",
        "name": "is active?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "active",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "inactive",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 600,
        "y": 600,
        "wires": [
            [
                "bf8561c.27047a",
                "cfb39ab9.45346"
            ],
            [
                "4c35d83e.70c12"
            ]
        ]
    },
    {
        "id": "d1fef5e9.1faa",
        "type": "switch",
        "z": "4c7c8cd1.6a2a1c",
        "name": "is active?",
        "property": "count",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 720,
        "y": 960,
        "wires": [
            [
                "3adf6856.200d98"
            ],
            [
                "baa794b2.a49bd"
            ]
        ]
    },
    {
        "id": "3adf6856.200d98",
        "type": "change",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Inactive",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "inactive",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "bf8561c.27047a",
        "type": "change",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Reset",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 580,
        "wires": [
            [
                "f9fb7202.670248",
                "d6e965c0.d24cd"
            ]
        ]
    },
    {
        "id": "5e909849.a5ede",
        "type": "switch",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Separate motion from contact",
        "property": "payload.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "motion",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "contact",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 510,
        "y": 200,
        "wires": [
            [
                "b265ec76b07bf2e6"
            ],
            [
                "ee67eca9.7c9548",
                "83dac1a6.f49bb"
            ]
        ]
    },
    {
        "id": "ee67eca9.7c9548",
        "type": "change",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Set active",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "active",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 220,
        "wires": [
            [
                "de4555d9.03c9f8"
            ]
        ]
    },
    {
        "id": "9dec185d.0fa0b",
        "type": "change",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Set inactive",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "inactive",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1230,
        "y": 260,
        "wires": [
            [
                "de4555d9.03c9f8"
            ]
        ]
    },
    {
        "id": "979d8215.69ba18",
        "type": "link out",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Switch Event",
        "links": [
            "b4f2e905.4ec488",
            "db637502.ed7b1"
        ],
        "x": 1455,
        "y": 220,
        "wires": []
    },
    {
        "id": "1135a6a5.8ffeb9",
        "type": "link out",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Motion Event",
        "links": [
            "b4f2e905.4ec488"
        ],
        "x": 1195,
        "y": 160,
        "wires": []
    },
    {
        "id": "c551054e.c3663",
        "type": "link in",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Trigger Status Update",
        "links": [
            "10373673.0c7d0a"
        ],
        "x": 295,
        "y": 940,
        "wires": [
            [
                "2d4ae563.a0394a"
            ]
        ]
    },
    {
        "id": "b4f2e905.4ec488",
        "type": "link in",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Set Outputs",
        "links": [
            "1135a6a5.8ffeb9",
            "979d8215.69ba18"
        ],
        "x": 295,
        "y": 600,
        "wires": [
            [
                "a6ce7a5b.5718f8"
            ]
        ]
    },
    {
        "id": "cb4ad9ea.ed3e38",
        "type": "comment",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Motion event",
        "info": "",
        "x": 1310,
        "y": 160,
        "wires": []
    },
    {
        "id": "acfeb2ce.da0e98",
        "type": "comment",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Sensor event",
        "info": "",
        "x": 1570,
        "y": 220,
        "wires": []
    },
    {
        "id": "83dac1a6.f49bb",
        "type": "change",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Sensor reset delay",
        "rules": [
            {
                "t": "set",
                "p": "delay",
                "pt": "msg",
                "to": "sensor reset delay",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "delay",
                "pt": "msg",
                "to": "delay * 1000",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 915,
        "y": 260,
        "wires": [
            [
                "1f831024.572ef8"
            ]
        ],
        "l": false
    },
    {
        "id": "1f831024.572ef8",
        "type": "trigger",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Sensor reset",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "5",
        "extend": true,
        "overrideDelay": true,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1050,
        "y": 260,
        "wires": [
            [
                "9dec185d.0fa0b"
            ]
        ]
    },
    {
        "id": "4c35d83e.70c12",
        "type": "change",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Configure activity reset delay",
        "rules": [
            {
                "t": "set",
                "p": "delay",
                "pt": "msg",
                "to": "activity_reset_delay",
                "tot": "env"
            },
            {
                "t": "set",
                "p": "delay",
                "pt": "msg",
                "to": "delay * 1000",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 620,
        "wires": [
            [
                "f9fb7202.670248",
                "6799e319.6e6d34"
            ]
        ]
    },
    {
        "id": "7a24866e.db567",
        "type": "comment",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Zone Active",
        "info": "",
        "x": 1450,
        "y": 520,
        "wires": []
    },
    {
        "id": "268891b5.f0e4f6",
        "type": "comment",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Zone Inactive",
        "info": "",
        "x": 1450,
        "y": 580,
        "wires": []
    },
    {
        "id": "de4555d9.03c9f8",
        "type": "rbe",
        "z": "4c7c8cd1.6a2a1c",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 1375,
        "y": 220,
        "wires": [
            [
                "979d8215.69ba18"
            ]
        ],
        "l": false
    },
    {
        "id": "28fb421d.2d7a2e",
        "type": "comment",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Status text",
        "info": "",
        "x": 340,
        "y": 880,
        "wires": []
    },
    {
        "id": "2d4ae563.a0394a",
        "type": "switch",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Motion zone active",
        "property": "zone_active",
        "propertyType": "flow",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 470,
        "y": 940,
        "wires": [
            [
                "6214c0ab.73eb08"
            ],
            [
                "d1fef5e9.1faa"
            ]
        ]
    },
    {
        "id": "6214c0ab.73eb08",
        "type": "change",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Disabled",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Zone disabled",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "a6ce7a5b.5718f8",
        "type": "switch",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Zone enabled?",
        "property": "zone_active",
        "propertyType": "flow",
        "rules": [
            {
                "t": "else"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 440,
        "y": 600,
        "wires": [
            [
                "f95fc416.12cdb8"
            ],
            []
        ]
    },
    {
        "id": "c90679d.51c6188",
        "type": "comment",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Outputs",
        "info": "",
        "x": 330,
        "y": 540,
        "wires": []
    },
    {
        "id": "d38c5418.44b928",
        "type": "comment",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Count motion events and transmit both enabled and disabled messages",
        "info": "",
        "x": 1160,
        "y": 80,
        "wires": []
    },
    {
        "id": "ed000248.4c118",
        "type": "inject",
        "z": "4c7c8cd1.6a2a1c",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 270,
        "y": 1000,
        "wires": [
            [
                "2d4ae563.a0394a"
            ]
        ]
    },
    {
        "id": "febb9c0d.c5d6e8",
        "type": "change",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Status: Cooldown x seconds",
        "rules": [
            {
                "t": "set",
                "p": "delay",
                "pt": "msg",
                "to": "delay / 1000",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "\"Cooldown \" & delay & \"s\"",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1400,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "d6e965c0.d24cd",
        "type": "trigger",
        "z": "4c7c8cd1.6a2a1c",
        "name": "1s delay",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 1180,
        "y": 760,
        "wires": [
            [
                "6799e319.6e6d34"
            ]
        ]
    },
    {
        "id": "6799e319.6e6d34",
        "type": "change",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Decrement Delay",
        "rules": [
            {
                "t": "set",
                "p": "delay",
                "pt": "msg",
                "to": "delay - 1000",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1110,
        "y": 620,
        "wires": [
            [
                "febb9c0d.c5d6e8",
                "4ee48e99.b05a9"
            ]
        ]
    },
    {
        "id": "cfb39ab9.45346",
        "type": "trigger",
        "z": "4c7c8cd1.6a2a1c",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 715,
        "y": 520,
        "wires": [
            [
                "10373673.0c7d0a"
            ]
        ],
        "l": false
    },
    {
        "id": "10373673.0c7d0a",
        "type": "link out",
        "z": "4c7c8cd1.6a2a1c",
        "name": "Activity State Change",
        "links": [
            "c551054e.c3663"
        ],
        "x": 1335,
        "y": 460,
        "wires": []
    },
    {
        "id": "4ee48e99.b05a9",
        "type": "switch",
        "z": "4c7c8cd1.6a2a1c",
        "name": "delay > 1",
        "property": "delay",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 940,
        "y": 760,
        "wires": [
            [
                "d6e965c0.d24cd"
            ]
        ]
    },
    {
        "id": "b265ec76b07bf2e6",
        "type": "function",
        "z": "4c7c8cd1.6a2a1c",
        "name": "",
        "func": "let motionStatus = null;\nlet activeCount = 0;\n\nlet sensors = context.get(\"sensors\") || {};\nlet wasActive = context.get(\"active\") || false;\nlet deviceId\n\nif (typeof msg.payload != \"undefined\" && msg.payload !== null) {\n    deviceId = msg.payload.deviceId;\n}\n\nif (typeof deviceId != \"undefined\") {\n\n    // If we didn't receive an event, the process was triggered by something else (eg. enabling the automation)\n    motionStatus = msg.payload.value\n\n    if (typeof sensors[deviceId] == \"undefined\") {\n        sensors[deviceId] = {}\n    }\n\n    let deviceObject = sensors[deviceId]\n\n    deviceObject.state = motionStatus\n    deviceObject.displayName = msg.topic\n\n    context.set(\"sensors\", sensors)\n}\n\n\nfor (let [deviceId, values] of Object.entries(sensors)) {\n    if ( values.state == 'active' ) {\n        activeCount++\n    }\n}\n\nconst active = activeCount > 0\n\nnewMessage = {\n  topic: env.get(\"Zone Name\"),\n  payload: active ? \"active\" : \"inactive\",\n  count: activeCount\n}\n\n    context.set(\"active\", active)\n    return newMessage\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 160,
        "wires": [
            [
                "1135a6a5.8ffeb9"
            ]
        ]
    },
    {
        "id": "8cd11419.9fb37",
        "type": "change",
        "z": "30a7f92d.9fbe16",
        "name": "Button 1",
        "rules": [
            {
                "t": "set",
                "p": "payload.button",
                "pt": "msg",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 40,
        "wires": [
            [
                "9164c316.fa994"
            ]
        ]
    },
    {
        "id": "632a01bf.d36c38",
        "type": "switch",
        "z": "30a7f92d.9fbe16",
        "name": "action",
        "property": "payload.button",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "8",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "9",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "10",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "11",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 5,
        "x": 230,
        "y": 100,
        "wires": [
            [
                "8cd11419.9fb37"
            ],
            [
                "4b2429c6.a69c88"
            ],
            [
                "f1eef6f.1455c08"
            ],
            [
                "6f2ca00a.40054"
            ],
            [
                "9801b221.2dbe38"
            ]
        ]
    },
    {
        "id": "69aa2139.1f936",
        "type": "switch",
        "z": "30a7f92d.9fbe16",
        "name": "param",
        "property": "payload.param",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 910,
        "y": 80,
        "wires": [
            [
                "4cd16890.d6ee58"
            ],
            [
                "31320711.4725b8"
            ],
            [
                "9332a190.b5b628"
            ]
        ]
    },
    {
        "id": "31320711.4725b8",
        "type": "change",
        "z": "30a7f92d.9fbe16",
        "name": "Released",
        "rules": [
            {
                "t": "set",
                "p": "payload.interaction",
                "pt": "msg",
                "to": "released",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1060,
        "y": 140,
        "wires": [
            [
                "9332a190.b5b628"
            ]
        ]
    },
    {
        "id": "4cd16890.d6ee58",
        "type": "change",
        "z": "30a7f92d.9fbe16",
        "name": "Pressed",
        "rules": [
            {
                "t": "set",
                "p": "payload.interaction",
                "pt": "msg",
                "to": "pressed",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1060,
        "y": 60,
        "wires": [
            [
                "9332a190.b5b628"
            ]
        ]
    },
    {
        "id": "9332a190.b5b628",
        "type": "delay",
        "z": "30a7f92d.9fbe16",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1255,
        "y": 100,
        "wires": [
            []
        ],
        "l": false
    },
    {
        "id": "4b2429c6.a69c88",
        "type": "change",
        "z": "30a7f92d.9fbe16",
        "name": "Button 2",
        "rules": [
            {
                "t": "set",
                "p": "payload.button",
                "pt": "msg",
                "to": "2",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 80,
        "wires": [
            [
                "9164c316.fa994"
            ]
        ]
    },
    {
        "id": "9164c316.fa994",
        "type": "delay",
        "z": "30a7f92d.9fbe16",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 615,
        "y": 100,
        "wires": [
            [
                "69aa2139.1f936"
            ]
        ],
        "l": false
    },
    {
        "id": "f1eef6f.1455c08",
        "type": "change",
        "z": "30a7f92d.9fbe16",
        "name": "Button 3",
        "rules": [
            {
                "t": "set",
                "p": "payload.button",
                "pt": "msg",
                "to": "3",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 120,
        "wires": [
            [
                "9164c316.fa994"
            ]
        ]
    },
    {
        "id": "6f2ca00a.40054",
        "type": "change",
        "z": "30a7f92d.9fbe16",
        "name": "Button 4",
        "rules": [
            {
                "t": "set",
                "p": "payload.button",
                "pt": "msg",
                "to": "4",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 160,
        "wires": [
            [
                "9164c316.fa994"
            ]
        ]
    },
    {
        "id": "9801b221.2dbe38",
        "type": "change",
        "z": "30a7f92d.9fbe16",
        "name": "Other btn ",
        "rules": [
            {
                "t": "set",
                "p": "payload.button",
                "pt": "msg",
                "to": "payload.action",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 400,
        "y": 200,
        "wires": [
            [
                "9164c316.fa994"
            ]
        ]
    },
    {
        "id": "4972c17de3d83982",
        "type": "subflow:eaca82ad.4ed06",
        "z": "1090998370659d02",
        "name": "Notify Rob",
        "x": 210,
        "y": 60,
        "wires": []
    },
    {
        "id": "f34d939765aa04c0",
        "type": "subflow:7435c4c5.81ec14",
        "z": "1090998370659d02",
        "name": "",
        "x": 210,
        "y": 100,
        "wires": []
    },
    {
        "id": "2837495c.ae2176",
        "type": "link out",
        "z": "f30f9979.39f178",
        "name": "Sunset",
        "mode": "link",
        "links": [
            "13a205f.9848cfa",
            "89ce2107.6a1858",
            "ea9de46ea03554d1"
        ],
        "x": 495,
        "y": 380,
        "wires": []
    },
    {
        "id": "1031c284.48fd75",
        "type": "time-inject",
        "z": "f30f9979.39f178",
        "name": "At Sunset",
        "nameInt": " sunset start = timestamp",
        "positionConfig": "96c207ac.2237a8",
        "injectTypeSelect": "time",
        "intervalCount": 1,
        "intervalCountType": "num",
        "intervalCountMultiplier": 60000,
        "time": "sunsetStart",
        "timeType": "pdsTime",
        "offset": 0,
        "offsetType": "none",
        "offsetMultiplier": 60000,
        "timeEnd": "",
        "timeEndType": "entered",
        "timeEndOffset": 0,
        "timeEndOffsetType": "none",
        "timeEndOffsetMultiplier": 60000,
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "property": "",
        "propertyType": "none",
        "propertyCompare": "true",
        "propertyThreshold": "",
        "propertyThresholdType": "num",
        "timeAlt": "",
        "timeAltType": "entered",
        "timeAltDays": "*",
        "timeAltOnlyOddDays": false,
        "timeAltOnlyEvenDays": false,
        "timeAltMonths": "*",
        "timeAltOffset": 0,
        "timeAltOffsetType": "none",
        "timeAltOffsetMultiplier": 60000,
        "once": false,
        "onceDelay": 0.1,
        "recalcTime": 2,
        "payload": "",
        "payloadType": "date",
        "payloadTimeFormat": 0,
        "payloadOffset": 0,
        "payloadOffsetType": "none",
        "payloadOffsetMultiplier": 60000,
        "topic": "",
        "addPayload1": "",
        "addPayload2": "",
        "addPayload3": "",
        "addPayload1Type": "none",
        "addPayload2Type": "none",
        "addPayload3Type": "none",
        "addPayload1Value": "",
        "addPayload2Value": "",
        "addPayload3Value": "",
        "addPayload1ValueType": "date",
        "addPayload2ValueType": "date",
        "addPayload3ValueType": "date",
        "addPayload1Format": "0",
        "addPayload2Format": "0",
        "addPayload3Format": "0",
        "addPayload1Offset": 0,
        "addPayload2Offset": 0,
        "addPayload3Offset": 0,
        "addPayload1OffsetType": "none",
        "addPayload2OffsetType": "none",
        "addPayload3OffsetType": "none",
        "addPayload1OffsetMultiplier": 60000,
        "addPayload2OffsetMultiplier": 60000,
        "addPayload3OffsetMultiplier": 60000,
        "addPayload1Next": true,
        "addPayload2Next": true,
        "addPayload3Next": true,
        "addPayload1Days": "*",
        "addPayload2Days": "*",
        "addPayload3Days": "*",
        "x": 340,
        "y": 380,
        "wires": [
            [
                "2837495c.ae2176"
            ]
        ]
    },
    {
        "id": "4e636188.7f332",
        "type": "link out",
        "z": "f30f9979.39f178",
        "name": "Sunrise",
        "mode": "link",
        "links": [
            "35f56d8f.e1d64a"
        ],
        "x": 495,
        "y": 320,
        "wires": []
    },
    {
        "id": "9beeb167.1d6b78",
        "type": "time-inject",
        "z": "f30f9979.39f178",
        "name": "At Sunrise",
        "nameInt": " sunrise end = timestamp",
        "positionConfig": "96c207ac.2237a8",
        "injectTypeSelect": "time",
        "intervalCount": 1,
        "intervalCountType": "num",
        "intervalCountMultiplier": 60000,
        "time": "sunriseEnd",
        "timeType": "pdsTime",
        "offset": 0,
        "offsetType": "none",
        "offsetMultiplier": 60000,
        "timeEnd": "",
        "timeEndType": "entered",
        "timeEndOffset": 0,
        "timeEndOffsetType": "none",
        "timeEndOffsetMultiplier": 60000,
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "property": "",
        "propertyType": "none",
        "propertyCompare": "true",
        "propertyThreshold": "",
        "propertyThresholdType": "num",
        "timeAlt": "",
        "timeAltType": "entered",
        "timeAltDays": "*",
        "timeAltOnlyOddDays": false,
        "timeAltOnlyEvenDays": false,
        "timeAltMonths": "*",
        "timeAltOffset": 0,
        "timeAltOffsetType": "none",
        "timeAltOffsetMultiplier": 60000,
        "once": false,
        "onceDelay": 0.1,
        "recalcTime": 2,
        "payload": "",
        "payloadType": "date",
        "payloadTimeFormat": 0,
        "payloadOffset": 0,
        "payloadOffsetType": "none",
        "payloadOffsetMultiplier": 60000,
        "topic": "",
        "addPayload1": "",
        "addPayload2": "",
        "addPayload3": "",
        "addPayload1Type": "none",
        "addPayload2Type": "none",
        "addPayload3Type": "none",
        "addPayload1Value": "",
        "addPayload2Value": "",
        "addPayload3Value": "",
        "addPayload1ValueType": "date",
        "addPayload2ValueType": "date",
        "addPayload3ValueType": "date",
        "addPayload1Format": "0",
        "addPayload2Format": "0",
        "addPayload3Format": "0",
        "addPayload1Offset": 0,
        "addPayload2Offset": 0,
        "addPayload3Offset": 0,
        "addPayload1OffsetType": "none",
        "addPayload2OffsetType": "none",
        "addPayload3OffsetType": "none",
        "addPayload1OffsetMultiplier": 60000,
        "addPayload2OffsetMultiplier": 60000,
        "addPayload3OffsetMultiplier": 60000,
        "addPayload1Next": true,
        "addPayload2Next": true,
        "addPayload3Next": true,
        "addPayload1Days": "*",
        "addPayload2Days": "*",
        "addPayload3Days": "*",
        "x": 340,
        "y": 320,
        "wires": [
            [
                "4e636188.7f332"
            ]
        ]
    },
    {
        "id": "30a0d8fa1e15d519",
        "type": "time-inject",
        "z": "f30f9979.39f178",
        "name": "23:30",
        "nameInt": " 23:30 = timestamp",
        "positionConfig": "96c207ac.2237a8",
        "props": [
            {
                "p": "",
                "pt": "msgPayload",
                "v": "",
                "vt": "date",
                "o": "1",
                "oT": "none",
                "oM": "60000",
                "f": 0,
                "fS": 0,
                "fT": "UNIX timestamp (ms)",
                "fI": "0",
                "next": true,
                "days": "*",
                "months": "*",
                "onlyOddDays": false,
                "onlyEvenDays": false,
                "onlyOddWeeks": false,
                "onlyEvenWeeks": false
            },
            {
                "p": "",
                "pt": "msgTopic",
                "v": "",
                "vt": "str",
                "o": "1",
                "oT": "none",
                "oM": "60000",
                "f": 0,
                "fS": 0,
                "fT": "UNIX timestamp (ms)",
                "fI": "0",
                "next": false,
                "days": "*",
                "months": "*",
                "onlyOddDays": false,
                "onlyEvenDays": false,
                "onlyOddWeeks": false,
                "onlyEvenWeeks": false
            }
        ],
        "injectTypeSelect": "time",
        "intervalCount": 1,
        "intervalCountType": "num",
        "intervalCountMultiplier": 60000,
        "time": "23:30",
        "timeType": "entered",
        "offset": 0,
        "offsetType": "none",
        "offsetMultiplier": 60000,
        "timeEnd": "",
        "timeEndType": "entered",
        "timeEndOffset": 0,
        "timeEndOffsetType": "none",
        "timeEndOffsetMultiplier": 60000,
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "property": "",
        "propertyType": "none",
        "propertyCompare": "true",
        "propertyThreshold": "",
        "propertyThresholdType": "num",
        "timeAlt": "",
        "timeAltType": "entered",
        "timeAltDays": "*",
        "timeAltOnlyOddDays": false,
        "timeAltOnlyEvenDays": false,
        "timeAltOnlyOddWeeks": false,
        "timeAltOnlyEvenWeeks": false,
        "timeAltMonths": "*",
        "timeAltOffset": 0,
        "timeAltOffsetType": "none",
        "timeAltOffsetMultiplier": 60000,
        "once": false,
        "onceDelay": 0.1,
        "recalcTime": 2,
        "x": 330,
        "y": 500,
        "wires": [
            [
                "6eb44101bb0fa836"
            ]
        ]
    },
    {
        "id": "6eb44101bb0fa836",
        "type": "link out",
        "z": "f30f9979.39f178",
        "name": "Christmas Decor Off",
        "mode": "link",
        "links": [],
        "x": 495,
        "y": 500,
        "wires": []
    },
    {
        "id": "b641be1c756b0a68",
        "type": "time-inject",
        "z": "f30f9979.39f178",
        "name": "First Light",
        "nameInt": " blue hour dawn start = timestamp",
        "positionConfig": "96c207ac.2237a8",
        "props": [
            {
                "p": "",
                "pt": "msgPayload",
                "v": "",
                "vt": "date",
                "o": "1",
                "oT": "none",
                "oM": "60000",
                "f": 0,
                "fS": 0,
                "fT": "UNIX timestamp (ms)",
                "fI": "0",
                "next": true,
                "days": "*",
                "months": "*",
                "onlyOddDays": false,
                "onlyEvenDays": false,
                "onlyOddWeeks": false,
                "onlyEvenWeeks": false
            },
            {
                "p": "",
                "pt": "msgTopic",
                "v": "",
                "vt": "str",
                "o": "1",
                "oT": "none",
                "oM": "60000",
                "f": 0,
                "fS": 0,
                "fT": "UNIX timestamp (ms)",
                "fI": "0",
                "next": false,
                "days": "*",
                "months": "*",
                "onlyOddDays": false,
                "onlyEvenDays": false,
                "onlyOddWeeks": false,
                "onlyEvenWeeks": false
            }
        ],
        "injectTypeSelect": "time",
        "intervalCount": 1,
        "intervalCountType": "num",
        "intervalCountMultiplier": 60000,
        "time": "blueHourDawnStart",
        "timeType": "pdsTime",
        "offset": 0,
        "offsetType": "none",
        "offsetMultiplier": 60000,
        "timeEnd": "",
        "timeEndType": "entered",
        "timeEndOffset": 0,
        "timeEndOffsetType": "none",
        "timeEndOffsetMultiplier": 60000,
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "property": "",
        "propertyType": "none",
        "propertyCompare": "true",
        "propertyThreshold": "",
        "propertyThresholdType": "num",
        "timeAlt": "",
        "timeAltType": "entered",
        "timeAltDays": "*",
        "timeAltOnlyOddDays": false,
        "timeAltOnlyEvenDays": false,
        "timeAltOnlyOddWeeks": false,
        "timeAltOnlyEvenWeeks": false,
        "timeAltMonths": "*",
        "timeAltOffset": 0,
        "timeAltOffsetType": "none",
        "timeAltOffsetMultiplier": 60000,
        "once": false,
        "onceDelay": 0.1,
        "recalcTime": 2,
        "x": 340,
        "y": 260,
        "wires": [
            [
                "e8c98c64072325d3"
            ]
        ]
    },
    {
        "id": "e8c98c64072325d3",
        "type": "link out",
        "z": "f30f9979.39f178",
        "name": "First Light",
        "mode": "link",
        "links": [
            "4f6c459db4701abf"
        ],
        "x": 495,
        "y": 260,
        "wires": []
    },
    {
        "id": "e73c6eb3b4677b6b",
        "type": "link out",
        "z": "f30f9979.39f178",
        "name": "Sunset",
        "mode": "link",
        "links": [
            "13a205f.9848cfa",
            "89ce2107.6a1858",
            "ea9de46ea03554d1"
        ],
        "x": 495,
        "y": 440,
        "wires": []
    },
    {
        "id": "8dd53e3c8a0d4a66",
        "type": "time-inject",
        "z": "f30f9979.39f178",
        "name": "Last Light",
        "nameInt": " blue hour dusk end = timestamp",
        "positionConfig": "96c207ac.2237a8",
        "props": [
            {
                "p": "",
                "pt": "msgPayload",
                "v": "",
                "vt": "date",
                "o": "1",
                "oT": "none",
                "oM": "60000",
                "f": 0,
                "fS": 0,
                "fT": "UNIX timestamp (ms)",
                "fI": "0",
                "next": true,
                "days": "*",
                "months": "*",
                "onlyOddDays": false,
                "onlyEvenDays": false,
                "onlyOddWeeks": false,
                "onlyEvenWeeks": false
            },
            {
                "p": "",
                "pt": "msgTopic",
                "v": "",
                "vt": "str",
                "o": "1",
                "oT": "none",
                "oM": "60000",
                "f": 0,
                "fS": 0,
                "fT": "UNIX timestamp (ms)",
                "fI": "0",
                "next": false,
                "days": "*",
                "months": "*",
                "onlyOddDays": false,
                "onlyEvenDays": false,
                "onlyOddWeeks": false,
                "onlyEvenWeeks": false
            }
        ],
        "injectTypeSelect": "time",
        "intervalCount": 1,
        "intervalCountType": "num",
        "intervalCountMultiplier": 60000,
        "time": "blueHourDuskEnd",
        "timeType": "pdsTime",
        "offset": 0,
        "offsetType": "none",
        "offsetMultiplier": 60000,
        "timeEnd": "",
        "timeEndType": "entered",
        "timeEndOffset": 0,
        "timeEndOffsetType": "none",
        "timeEndOffsetMultiplier": 60000,
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "property": "",
        "propertyType": "none",
        "propertyCompare": "true",
        "propertyThreshold": "",
        "propertyThresholdType": "num",
        "timeAlt": "",
        "timeAltType": "entered",
        "timeAltDays": "*",
        "timeAltOnlyOddDays": false,
        "timeAltOnlyEvenDays": false,
        "timeAltOnlyOddWeeks": false,
        "timeAltOnlyEvenWeeks": false,
        "timeAltMonths": "*",
        "timeAltOffset": 0,
        "timeAltOffsetType": "none",
        "timeAltOffsetMultiplier": 60000,
        "once": false,
        "onceDelay": 0.1,
        "recalcTime": 2,
        "x": 340,
        "y": 440,
        "wires": [
            [
                "e73c6eb3b4677b6b"
            ]
        ]
    },
    {
        "id": "78d27aa4.3a922c",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "color_temperature",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 920,
        "wires": [
            [
                "b0c8d31a.f0e56"
            ]
        ]
    },
    {
        "id": "e1e38786.f7807",
        "type": "inject",
        "z": "f9337f21.0eab78",
        "name": "Every 15 minutes",
        "props": [
            {
                "p": "payload",
                "v": "",
                "vt": "date"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "900",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 190,
        "y": 860,
        "wires": [
            [
                "c6f15bd3bae34137"
            ]
        ]
    },
    {
        "id": "b0c8d31a.f0e56",
        "type": "link out",
        "z": "f9337f21.0eab78",
        "name": "Color Temperature Updated",
        "links": [
            "ac7411a0.a83e9",
            "dc311cbd.e678c8"
        ],
        "x": 1575,
        "y": 920,
        "wires": []
    },
    {
        "id": "c5d2e3b6.bd6a4",
        "type": "link in",
        "z": "f9337f21.0eab78",
        "name": "Calculate CT Target",
        "links": [
            "33ed496c.3b1f1e"
        ],
        "x": 95,
        "y": 920,
        "wires": [
            [
                "8fa8cca6.3c39b8"
            ]
        ]
    },
    {
        "id": "8fa8cca6.3c39b8",
        "type": "delay",
        "z": "f9337f21.0eab78",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "30",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "outputs": 1,
        "x": 220,
        "y": 920,
        "wires": [
            [
                "c6f15bd3bae34137"
            ]
        ]
    },
    {
        "id": "9a110e75.82802",
        "type": "range",
        "z": "f9337f21.0eab78",
        "minin": "0",
        "maxin": "100",
        "minout": "2500",
        "maxout": "4500",
        "action": "clamp",
        "round": true,
        "property": "payload",
        "name": "percent to kelvin range",
        "x": 1140,
        "y": 920,
        "wires": [
            [
                "78d27aa4.3a922c"
            ]
        ]
    },
    {
        "id": "17a47889.a03a2f",
        "type": "sun-position",
        "z": "f9337f21.0eab78",
        "name": "",
        "positionConfig": "96c207ac.2237a8",
        "rules": [],
        "onlyOnChange": "true",
        "topic": "",
        "outputs": 1,
        "start": "",
        "startType": "none",
        "startOffset": 0,
        "startOffsetType": "none",
        "startOffsetMultiplier": 60000,
        "end": "",
        "endType": "none",
        "endOffset": 0,
        "endOffsetType": "none",
        "endOffsetMultiplier": 60000,
        "x": 670,
        "y": 940,
        "wires": [
            [
                "f183b6f5.423ec"
            ]
        ]
    },
    {
        "id": "f183b6f5.423ec",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "Set Auto Color Temp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.altitudePercent",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 880,
        "y": 940,
        "wires": [
            [
                "9a110e75.82802"
            ]
        ]
    },
    {
        "id": "b8dd13b1.797cb",
        "type": "change",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "Turn Off",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 1360,
        "wires": [
            [
                "90aea5fd83ba6ac4"
            ]
        ]
    },
    {
        "id": "5c9841f.19b74c",
        "type": "change",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "Turn On",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 500,
        "y": 1320,
        "wires": [
            [
                "90aea5fd83ba6ac4"
            ]
        ]
    },
    {
        "id": "1fbcdc78.00e81c",
        "type": "comment",
        "z": "f9337f21.0eab78",
        "name": "Porch light",
        "info": "",
        "x": 240,
        "y": 3300,
        "wires": []
    },
    {
        "id": "30aade80.91cb42",
        "type": "within-time-switch",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "sunset - sunrise",
        "positionConfig": "96c207ac.2237a8",
        "startTime": "sunsetEnd",
        "startTimeType": "pdsTime",
        "startOffset": 0,
        "startOffsetType": "none",
        "startOffsetMultiplier": 60000,
        "endTime": "sunriseStart",
        "endTimeType": "pdsTime",
        "endOffset": 0,
        "endOffsetType": "none",
        "endOffsetMultiplier": 60000,
        "timeRestrictions": "",
        "timeRestrictionsType": "none",
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "propertyStart": "",
        "propertyStartType": "none",
        "propertyStartCompare": "true",
        "propertyStartThreshold": "",
        "propertyStartThresholdType": "num",
        "startTimeAlt": "",
        "startTimeAltType": "entered",
        "startOffsetAlt": 0,
        "startOffsetAltType": "none",
        "startOffsetAltMultiplier": 60000,
        "propertyEnd": "",
        "propertyEndType": "none",
        "propertyEndCompare": "true",
        "propertyEndThreshold": "",
        "propertyEndThresholdType": "num",
        "endTimeAlt": "",
        "endTimeAltType": "entered",
        "endOffsetAlt": 0,
        "endOffsetAltType": "none",
        "endOffsetAltMultiplier": 60000,
        "withinTimeValue": "",
        "withinTimeValueType": "msgInput",
        "outOfTimeValue": "",
        "outOfTimeValueType": "msgInput",
        "tsCompare": "0",
        "x": 280,
        "y": 1340,
        "wires": [
            [
                "5c9841f.19b74c"
            ],
            [
                "b8dd13b1.797cb"
            ]
        ]
    },
    {
        "id": "76fddf4.66e0da",
        "type": "inject",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 135,
        "y": 1340,
        "wires": [
            [
                "30aade80.91cb42"
            ]
        ],
        "l": false
    },
    {
        "id": "82929842.1531",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "",
        "property": "manual_ct.enabled",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 510,
        "y": 920,
        "wires": [
            [
                "d992f052.6d2dd8"
            ],
            [
                "17a47889.a03a2f"
            ]
        ]
    },
    {
        "id": "d992f052.6d2dd8",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "Set Manual CT",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "manual_ct.value",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 860,
        "y": 900,
        "wires": [
            [
                "9a110e75.82802"
            ]
        ]
    },
    {
        "id": "e834d70c.0d45a8",
        "type": "comment",
        "z": "f9337f21.0eab78",
        "name": "Set CT target every 15 min",
        "info": "",
        "x": 190,
        "y": 800,
        "wires": []
    },
    {
        "id": "89ce2107.6a1858",
        "type": "link in",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "Porch Bulb On",
        "links": [
            "2837495c.ae2176",
            "e73c6eb3b4677b6b"
        ],
        "x": 275,
        "y": 1300,
        "wires": [
            [
                "5c9841f.19b74c"
            ]
        ]
    },
    {
        "id": "35f56d8f.e1d64a",
        "type": "link in",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "Porch Bulb Off",
        "links": [
            "4e636188.7f332"
        ],
        "x": 275,
        "y": 1380,
        "wires": [
            [
                "b8dd13b1.797cb"
            ]
        ]
    },
    {
        "id": "4ce81eb7.3b5058",
        "type": "time-inject",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "",
        "nameInt": " 23:45 = timestamp",
        "positionConfig": "96c207ac.2237a8",
        "props": [
            {
                "p": "",
                "pt": "msgPayload",
                "v": "",
                "vt": "date",
                "o": "",
                "oT": "none",
                "oM": "60000",
                "f": 0,
                "fS": 0,
                "fT": "UNIX timestamp (ms)",
                "fI": "0",
                "next": true,
                "days": "",
                "months": "*",
                "onlyOddDays": false,
                "onlyEvenDays": false,
                "onlyOddWeeks": false,
                "onlyEvenWeeks": false
            },
            {
                "p": "",
                "pt": "msgTopic",
                "v": "",
                "vt": "str",
                "o": "",
                "oT": "none",
                "oM": "60000",
                "f": 0,
                "fS": 0,
                "fT": "UNIX timestamp (ms)",
                "fI": "0",
                "next": false,
                "days": "",
                "months": "*",
                "onlyOddDays": false,
                "onlyEvenDays": false,
                "onlyOddWeeks": false,
                "onlyEvenWeeks": false
            }
        ],
        "injectTypeSelect": "time",
        "intervalCount": 1,
        "intervalCountType": "num",
        "intervalCountMultiplier": 60000,
        "time": "23:45",
        "timeType": "entered",
        "offset": 0,
        "offsetType": "none",
        "offsetMultiplier": 60000,
        "timeEnd": "",
        "timeEndType": "entered",
        "timeEndOffset": 0,
        "timeEndOffsetType": "none",
        "timeEndOffsetMultiplier": 60000,
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "property": "",
        "propertyType": "none",
        "propertyCompare": "true",
        "propertyThreshold": "",
        "propertyThresholdType": "num",
        "timeAlt": "",
        "timeAltType": "entered",
        "timeAltDays": "*",
        "timeAltOnlyOddDays": false,
        "timeAltOnlyEvenDays": false,
        "timeAltOnlyOddWeeks": false,
        "timeAltOnlyEvenWeeks": false,
        "timeAltMonths": "*",
        "timeAltOffset": 0,
        "timeAltOffsetType": "none",
        "timeAltOffsetMultiplier": 60000,
        "once": false,
        "onceDelay": 0.1,
        "recalcTime": 2,
        "x": 300,
        "y": 3220,
        "wires": [
            [
                "aa36796c3a751774"
            ]
        ]
    },
    {
        "id": "c596c921.6f231",
        "type": "time-inject",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "",
        "nameInt": " 7:05 = timestamp",
        "positionConfig": "96c207ac.2237a8",
        "props": [
            {
                "p": "",
                "pt": "msgPayload",
                "v": "",
                "vt": "date",
                "o": "",
                "oT": "none",
                "oM": "60000",
                "f": 0,
                "fS": 0,
                "fT": "UNIX timestamp (ms)",
                "fI": "0",
                "next": true,
                "days": "",
                "months": "*",
                "onlyOddDays": false,
                "onlyEvenDays": false,
                "onlyOddWeeks": false,
                "onlyEvenWeeks": false
            },
            {
                "p": "",
                "pt": "msgTopic",
                "v": "",
                "vt": "str",
                "o": "",
                "oT": "none",
                "oM": "60000",
                "f": 0,
                "fS": 0,
                "fT": "UNIX timestamp (ms)",
                "fI": "0",
                "next": false,
                "days": "",
                "months": "*",
                "onlyOddDays": false,
                "onlyEvenDays": false,
                "onlyOddWeeks": false,
                "onlyEvenWeeks": false
            }
        ],
        "injectTypeSelect": "time",
        "intervalCount": 1,
        "intervalCountType": "num",
        "intervalCountMultiplier": 60000,
        "time": "7:05",
        "timeType": "entered",
        "offset": 0,
        "offsetType": "none",
        "offsetMultiplier": 60000,
        "timeEnd": "",
        "timeEndType": "entered",
        "timeEndOffset": 0,
        "timeEndOffsetType": "none",
        "timeEndOffsetMultiplier": 60000,
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "property": "",
        "propertyType": "none",
        "propertyCompare": "true",
        "propertyThreshold": "",
        "propertyThresholdType": "num",
        "timeAlt": "",
        "timeAltType": "entered",
        "timeAltDays": "*",
        "timeAltOnlyOddDays": false,
        "timeAltOnlyEvenDays": false,
        "timeAltOnlyOddWeeks": false,
        "timeAltOnlyEvenWeeks": false,
        "timeAltMonths": "*",
        "timeAltOffset": 0,
        "timeAltOffsetType": "none",
        "timeAltOffsetMultiplier": 60000,
        "once": false,
        "onceDelay": 0.1,
        "recalcTime": 2,
        "x": 300,
        "y": 3180,
        "wires": [
            [
                "056f0cd790053f1f"
            ]
        ]
    },
    {
        "id": "2ef30931.bfae5e",
        "type": "comment",
        "z": "f9337f21.0eab78",
        "name": "Christmas things",
        "info": "Christmas Tree",
        "x": 260,
        "y": 3080,
        "wires": []
    },
    {
        "id": "4c8e959.ebe296c",
        "type": "within-time-switch",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "",
        "positionConfig": "96c207ac.2237a8",
        "startTime": "sunsetEnd",
        "startTimeType": "pdsTime",
        "startOffset": "-45",
        "startOffsetType": "num",
        "startOffsetMultiplier": 60000,
        "endTime": "23:45",
        "endTimeType": "entered",
        "endOffset": 0,
        "endOffsetType": "none",
        "endOffsetMultiplier": 60000,
        "timeRestrictions": "",
        "timeRestrictionsType": "none",
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "propertyStart": "",
        "propertyStartType": "none",
        "propertyStartCompare": "true",
        "propertyStartThreshold": "",
        "propertyStartThresholdType": "num",
        "startTimeAlt": "",
        "startTimeAltType": "entered",
        "startOffsetAlt": 0,
        "startOffsetAltType": "none",
        "startOffsetAltMultiplier": 60000,
        "propertyEnd": "",
        "propertyEndType": "none",
        "propertyEndCompare": "true",
        "propertyEndThreshold": "",
        "propertyEndThresholdType": "num",
        "endTimeAlt": "",
        "endTimeAltType": "entered",
        "endOffsetAlt": 0,
        "endOffsetAltType": "none",
        "endOffsetAltMultiplier": 60000,
        "withinTimeValue": "",
        "withinTimeValueType": "msgInput",
        "outOfTimeValue": "",
        "outOfTimeValueType": "msgInput",
        "tsCompare": "0",
        "x": 320,
        "y": 3800,
        "wires": [
            [
                "22b6d01e.452a48"
            ],
            [
                "103cf87a.abee18"
            ]
        ]
    },
    {
        "id": "4b47917.4f0bb7",
        "type": "inject",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payloadType": "date",
        "x": 195,
        "y": 3800,
        "wires": [
            [
                "4c8e959.ebe296c"
            ]
        ],
        "l": false
    },
    {
        "id": "22b6d01e.452a48",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "d": true,
        "deviceLabel": "",
        "name": "Christmas outdoor lights On",
        "server": "252d4ef4.c14b6a",
        "deviceId": "8",
        "command": "on",
        "commandArgs": "",
        "x": 620,
        "y": 3760,
        "wires": [
            []
        ]
    },
    {
        "id": "103cf87a.abee18",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "d": true,
        "deviceLabel": "",
        "name": "Outdoor Christmas lights Off",
        "server": "252d4ef4.c14b6a",
        "deviceId": "8",
        "command": "off",
        "commandArgs": "",
        "x": 620,
        "y": 3820,
        "wires": [
            []
        ]
    },
    {
        "id": "7bbb3a43.05164c",
        "type": "time-inject",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "",
        "nameInt": " 22:30 = timestamp",
        "positionConfig": "96c207ac.2237a8",
        "props": [
            {
                "p": "",
                "pt": "msgPayload",
                "v": "",
                "vt": "date",
                "o": "",
                "oT": "none",
                "oM": "60000",
                "f": 0,
                "fS": 0,
                "fT": "UNIX timestamp (ms)",
                "fI": "0",
                "next": true,
                "days": "",
                "months": "*",
                "onlyOddDays": false,
                "onlyEvenDays": false,
                "onlyOddWeeks": false,
                "onlyEvenWeeks": false
            },
            {
                "p": "",
                "pt": "msgTopic",
                "v": "",
                "vt": "str",
                "o": "",
                "oT": "none",
                "oM": "60000",
                "f": 0,
                "fS": 0,
                "fT": "UNIX timestamp (ms)",
                "fI": "0",
                "next": false,
                "days": "",
                "months": "*",
                "onlyOddDays": false,
                "onlyEvenDays": false,
                "onlyOddWeeks": false,
                "onlyEvenWeeks": false
            }
        ],
        "injectTypeSelect": "time",
        "intervalCount": 1,
        "intervalCountType": "num",
        "intervalCountMultiplier": 60000,
        "time": "22:30",
        "timeType": "entered",
        "offset": 0,
        "offsetType": "none",
        "offsetMultiplier": 60000,
        "timeEnd": "",
        "timeEndType": "entered",
        "timeEndOffset": 0,
        "timeEndOffsetType": "none",
        "timeEndOffsetMultiplier": 60000,
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "property": "",
        "propertyType": "none",
        "propertyCompare": "true",
        "propertyThreshold": "",
        "propertyThresholdType": "num",
        "timeAlt": "",
        "timeAltType": "entered",
        "timeAltDays": "*",
        "timeAltOnlyOddDays": false,
        "timeAltOnlyEvenDays": false,
        "timeAltOnlyOddWeeks": false,
        "timeAltOnlyEvenWeeks": false,
        "timeAltMonths": "*",
        "timeAltOffset": 0,
        "timeAltOffsetType": "none",
        "timeAltOffsetMultiplier": 60000,
        "once": false,
        "onceDelay": 0.1,
        "recalcTime": 2,
        "x": 320,
        "y": 3860,
        "wires": [
            [
                "103cf87a.abee18"
            ]
        ]
    },
    {
        "id": "13a205f.9848cfa",
        "type": "link in",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "Christmas lights on",
        "links": [
            "2837495c.ae2176",
            "e73c6eb3b4677b6b"
        ],
        "x": 195,
        "y": 3760,
        "wires": [
            [
                "22b6d01e.452a48"
            ]
        ]
    },
    {
        "id": "58e0ec60.bafb94",
        "type": "hubitat event",
        "z": "f9337f21.0eab78",
        "name": "All Events",
        "server": "252d4ef4.c14b6a",
        "x": 140,
        "y": 260,
        "wires": [
            [
                "94dde739.518ef8"
            ]
        ]
    },
    {
        "id": "94dde739.518ef8",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "== switch",
        "property": "payload.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "switch",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 280,
        "y": 260,
        "wires": [
            [
                "9c7a6454.dc21f"
            ]
        ]
    },
    {
        "id": "9c7a6454.dc21f",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "== on",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 410,
        "y": 260,
        "wires": [
            [
                "c8190e0a.7f7a48"
            ]
        ]
    },
    {
        "id": "bccb5224.c91e6",
        "type": "hubitat device",
        "z": "f9337f21.0eab78",
        "deviceLabel": "",
        "name": "Fetch Device",
        "server": "252d4ef4.c14b6a",
        "deviceId": "",
        "attribute": "",
        "sendEvent": false,
        "x": 750,
        "y": 260,
        "wires": [
            [
                "e473965f.8a5b68"
            ]
        ]
    },
    {
        "id": "c8190e0a.7f7a48",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "deviceId",
                "pt": "msg",
                "to": "payload.deviceId",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 260,
        "wires": [
            [
                "bccb5224.c91e6"
            ]
        ]
    },
    {
        "id": "60321171.83d2c8",
        "type": "comment",
        "z": "f9337f21.0eab78",
        "name": "When a device is turned on, check if it's a CT bulb",
        "info": "",
        "x": 270,
        "y": 200,
        "wires": []
    },
    {
        "id": "e473965f.8a5b68",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "CT Bulb?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "hask",
                "v": "colorTemperature",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 920,
        "y": 260,
        "wires": [
            [
                "33ed496c.3b1f1e"
            ]
        ]
    },
    {
        "id": "10420ba7.156514",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "Set Color Temp",
        "rules": [
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "color_temperature",
                "tot": "flow"
            },
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "setColorTemperature",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 220,
        "y": 600,
        "wires": [
            [
                "277db169152d7597"
            ]
        ]
    },
    {
        "id": "c1b27dbf.a11668",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "deviceLabel": "",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "",
        "command": "",
        "commandArgs": "",
        "x": 680,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "33ed496c.3b1f1e",
        "type": "link out",
        "z": "f9337f21.0eab78",
        "name": "Bulb turned on",
        "links": [
            "950cba8b.112ef8",
            "c5d2e3b6.bd6a4"
        ],
        "x": 1015,
        "y": 260,
        "wires": []
    },
    {
        "id": "950cba8b.112ef8",
        "type": "link in",
        "z": "f9337f21.0eab78",
        "name": "Bulb CT Update",
        "links": [
            "33ed496c.3b1f1e",
            "a197e4e7.48a7c"
        ],
        "x": 95,
        "y": 600,
        "wires": [
            [
                "10420ba7.156514"
            ]
        ]
    },
    {
        "id": "21b8a5fd.7a31d2",
        "type": "split",
        "z": "f9337f21.0eab78",
        "name": "",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 375,
        "y": 400,
        "wires": [
            [
                "7bc998fc.ab71a"
            ]
        ],
        "l": false
    },
    {
        "id": "7bc998fc.ab71a",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "CT Bulb?",
        "property": "payload.capabilities",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "ColorTemperature",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 480,
        "y": 400,
        "wires": [
            [
                "37a242c8.10feb6"
            ]
        ]
    },
    {
        "id": "37a242c8.10feb6",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "On?",
        "property": "payload.attributes.switch",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 630,
        "y": 400,
        "wires": [
            [
                "65f9e584.babbf4"
            ]
        ]
    },
    {
        "id": "a197e4e7.48a7c",
        "type": "link out",
        "z": "f9337f21.0eab78",
        "name": "",
        "links": [
            "950cba8b.112ef8"
        ],
        "x": 1195,
        "y": 400,
        "wires": []
    },
    {
        "id": "dc311cbd.e678c8",
        "type": "link in",
        "z": "f9337f21.0eab78",
        "name": "Update All Bulbs CT",
        "links": [
            "b0c8d31a.f0e56"
        ],
        "x": 95,
        "y": 400,
        "wires": [
            [
                "908997a7979b19f7"
            ]
        ]
    },
    {
        "id": "6c75f0cf.aaaf68",
        "type": "comment",
        "z": "f9337f21.0eab78",
        "name": "When the CT target is updated, pull and update all active bulbs",
        "info": "",
        "x": 310,
        "y": 340,
        "wires": []
    },
    {
        "id": "eef4c6a1.ea14a",
        "type": "comment",
        "z": "f9337f21.0eab78",
        "name": "Update a single bulb",
        "info": "",
        "x": 170,
        "y": 540,
        "wires": []
    },
    {
        "id": "145e840c.2ed744",
        "type": "delay",
        "z": "f9337f21.0eab78",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 1070,
        "y": 400,
        "wires": [
            [
                "a197e4e7.48a7c"
            ]
        ]
    },
    {
        "id": "d820eb75.8fe88",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "Set Device ID",
        "rules": [
            {
                "t": "set",
                "p": "deviceId",
                "pt": "msg",
                "to": "payload.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 935,
        "y": 400,
        "wires": [
            [
                "145e840c.2ed744"
            ]
        ],
        "l": false
    },
    {
        "id": "65f9e584.babbf4",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "CT is Wrong?",
        "property": "payload.attributes.colorTemperature",
        "propertyType": "msg",
        "rules": [
            {
                "t": "btwn",
                "v": "$flowContext(\"color_temperature\")-25",
                "vt": "jsonata",
                "v2": "$flowContext(\"color_temperature\")+25",
                "v2t": "jsonata"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 800,
        "y": 400,
        "wires": [
            [],
            [
                "d820eb75.8fe88"
            ]
        ]
    },
    {
        "id": "9a4d93e3.9f5c3",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "off",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 1700,
        "wires": [
            [
                "9708140dd46c678d"
            ]
        ]
    },
    {
        "id": "91e8ca3f.3f295",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "Turn On",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1120,
        "y": 1520,
        "wires": [
            [
                "3d10086a6a0f415f"
            ]
        ]
    },
    {
        "id": "a0f2d6e.daab828",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Leahs Bedside",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "1",
        "command": "",
        "commandArgs": "",
        "x": 1420,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "407e2a78.c9971c",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Robs Bedside",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "554",
        "command": "",
        "commandArgs": "",
        "x": 1420,
        "y": 1620,
        "wires": [
            []
        ]
    },
    {
        "id": "16910248bf6af96e",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "Released Only",
        "property": "payload.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "released",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 1,
        "x": 360,
        "y": 1600,
        "wires": [
            [
                "b2f59f4fef3d8b86"
            ]
        ]
    },
    {
        "id": "b2f59f4fef3d8b86",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "which button",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "5",
                "vt": "num"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 550,
        "y": 1600,
        "wires": [
            [
                "c5b379fdf2f7a65f"
            ],
            [
                "7dd8873a8c61588a"
            ],
            [
                "18b6045b22c4cc73"
            ],
            [
                "9a4d93e3.9f5c3"
            ]
        ]
    },
    {
        "id": "ba0630734df9353f",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "d": true,
        "deviceLabel": "Porch Bulb",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "129",
        "command": "",
        "commandArgs": "",
        "x": 770,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "ee0bd27a6442d9c0",
        "type": "change",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "is_red := false",
        "rules": [
            {
                "t": "set",
                "p": "is_red",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1300,
        "y": 3380,
        "wires": [
            [
                "42ed4e7930637962"
            ]
        ]
    },
    {
        "id": "c63d476daa70e7fc",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "is_red?",
        "property": "is_red",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1120,
        "y": 3400,
        "wires": [
            [
                "ee0bd27a6442d9c0"
            ],
            [
                "1657120c75a44639"
            ]
        ]
    },
    {
        "id": "1657120c75a44639",
        "type": "change",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "is_red := true",
        "rules": [
            {
                "t": "set",
                "p": "is_red",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1290,
        "y": 3420,
        "wires": [
            [
                "4505442f74bfd3ab"
            ]
        ]
    },
    {
        "id": "42ed4e7930637962",
        "type": "change",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "Make Green",
        "rules": [
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "{\"hue\": 31, \"saturation\": 55, \"level\": 100}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "$string(msg.arguments)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "setColor",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1490,
        "y": 3380,
        "wires": [
            [
                "a82371ccd38f40e5"
            ]
        ]
    },
    {
        "id": "4505442f74bfd3ab",
        "type": "change",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "Make Red",
        "rules": [
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "{\"hue\": 1, \"saturation\": 64, \"level\": 100}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "$string(msg.arguments)",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "setColor",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1490,
        "y": 3420,
        "wires": [
            [
                "a82371ccd38f40e5"
            ]
        ]
    },
    {
        "id": "4abace46d88d5d82",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "d": true,
        "deviceLabel": "Porch Bulb",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "129",
        "command": "setColor",
        "commandArgs": "",
        "x": 1730,
        "y": 3400,
        "wires": [
            []
        ]
    },
    {
        "id": "7bbc68f86666af49",
        "type": "inject",
        "z": "f9337f21.0eab78",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1395,
        "y": 3320,
        "wires": [
            [
                "42ed4e7930637962"
            ]
        ],
        "l": false
    },
    {
        "id": "23abbe03a5af6625",
        "type": "inject",
        "z": "f9337f21.0eab78",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1395,
        "y": 3480,
        "wires": [
            [
                "4505442f74bfd3ab"
            ]
        ],
        "l": false
    },
    {
        "id": "ed59489e0b1aba05",
        "type": "within-time-switch",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "",
        "positionConfig": "96c207ac.2237a8",
        "startTime": "sunsetEnd",
        "startTimeType": "pdsTime",
        "startOffset": 0,
        "startOffsetType": "none",
        "startOffsetMultiplier": 60000,
        "endTime": "23:00",
        "endTimeType": "entered",
        "endOffset": 0,
        "endOffsetType": "none",
        "endOffsetMultiplier": 60000,
        "timeRestrictions": "",
        "timeRestrictionsType": "none",
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "propertyStart": "",
        "propertyStartType": "none",
        "propertyStartCompare": "true",
        "propertyStartThreshold": "",
        "propertyStartThresholdType": "num",
        "startTimeAlt": "",
        "startTimeAltType": "entered",
        "startOffsetAlt": 0,
        "startOffsetAltType": "none",
        "startOffsetAltMultiplier": 60000,
        "propertyEnd": "",
        "propertyEndType": "none",
        "propertyEndCompare": "true",
        "propertyEndThreshold": "",
        "propertyEndThresholdType": "num",
        "endTimeAlt": "",
        "endTimeAltType": "entered",
        "endOffsetAlt": 0,
        "endOffsetAltType": "none",
        "endOffsetAltMultiplier": 60000,
        "withinTimeValue": "",
        "withinTimeValueType": "msgInput",
        "outOfTimeValue": "",
        "outOfTimeValueType": "msgInput",
        "tsCompare": "0",
        "x": 650,
        "y": 3400,
        "wires": [
            [
                "5d3933e8fba9abec"
            ],
            []
        ]
    },
    {
        "id": "908997a7979b19f7",
        "type": "hubitat request",
        "z": "f9337f21.0eab78",
        "name": "fetch all devices",
        "server": "252d4ef4.c14b6a",
        "path": "/devices/all",
        "x": 240,
        "y": 400,
        "wires": [
            [
                "21b8a5fd.7a31d2"
            ]
        ]
    },
    {
        "id": "820b94d67933b2ef",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "d": true,
        "deviceLabel": "Christmas Tree",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "225",
        "command": "",
        "commandArgs": "",
        "x": 900,
        "y": 3180,
        "wires": [
            []
        ]
    },
    {
        "id": "277db169152d7597",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "Exclude Porch Light",
        "property": "deviceId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "129",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 460,
        "y": 600,
        "wires": [
            [
                "c1b27dbf.a11668"
            ]
        ]
    },
    {
        "id": "ad06d2e528474b01",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "40%",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "setLevel",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "40",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 1600,
        "wires": [
            [
                "d52d8310f3f1401c"
            ]
        ]
    },
    {
        "id": "d52d8310f3f1401c",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Leahs Bedside",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "1",
        "command": "",
        "commandArgs": "",
        "x": 940,
        "y": 1580,
        "wires": [
            []
        ]
    },
    {
        "id": "909304f270670f74",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Robs Bedside",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "554",
        "command": "",
        "commandArgs": "",
        "x": 940,
        "y": 1640,
        "wires": [
            []
        ]
    },
    {
        "id": "1ebe7fe71271b214",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "off",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 1640,
        "wires": [
            [
                "909304f270670f74"
            ]
        ]
    },
    {
        "id": "c5b379fdf2f7a65f",
        "type": "hubitat device",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Leahs Bedside",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "1",
        "attribute": "switch",
        "sendEvent": false,
        "x": 800,
        "y": 1500,
        "wires": [
            [
                "d806568fcaba0728"
            ]
        ]
    },
    {
        "id": "d806568fcaba0728",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "is on",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 950,
        "y": 1500,
        "wires": [
            [
                "fff71a09e63a6fe9"
            ],
            [
                "91e8ca3f.3f295"
            ]
        ]
    },
    {
        "id": "fff71a09e63a6fe9",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "Set to 100%",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "setLevel",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "100",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1130,
        "y": 1480,
        "wires": [
            [
                "3d10086a6a0f415f"
            ]
        ]
    },
    {
        "id": "056f0cd790053f1f",
        "type": "change",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "on",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 3180,
        "wires": [
            [
                "cdce099a16e20aab"
            ]
        ]
    },
    {
        "id": "aa36796c3a751774",
        "type": "change",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "off",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 3220,
        "wires": [
            [
                "cdce099a16e20aab"
            ]
        ]
    },
    {
        "id": "7a4fd7484e0b4127",
        "type": "inject",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "*/30s",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "30",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 250,
        "y": 3400,
        "wires": [
            [
                "954db6bb63031efc"
            ]
        ]
    },
    {
        "id": "954db6bb63031efc",
        "type": "function",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "y = (x/59450)^2 + 0.5",
        "func": "let now = new Date()\nlet christmas_day = new Date(now.getFullYear(), 11, 25)\nlet seconds_between_now_and_christmas = Math.abs(Math.floor((christmas_day.getTime() - now.getTime()) / 1000))\n// x = seconds between now and christmas\n// y = interval between switching colors between red and green, in seconds\n// y = (x/59450)^2 + 1\nlet interval = Math.pow(seconds_between_now_and_christmas / 59450, 2) + 0.5\nlet last_switch = new Date(flow.get(\"last_switch\") || 0)\nlet seconds_since_switch = (now.getTime() - last_switch.getTime()) / 1000\nlet should_tick = seconds_since_switch > interval\nlet seconds_until_switch = Math.floor(interval - seconds_since_switch)\n\nnode.status({ fill: \"green\", shape: \"ring\", text: `${seconds_until_switch}s until switch` });\n\nif (should_tick) {\n    flow.set(\"last_switch\", now.getTime())\n    console.log({\n        payload: {\n            \"should_tick\": should_tick,\n            \"interval\": interval,\n            \"last_switch\": last_switch\n        }\n    })\n\n    return msg\n} else {\n    return null\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 3400,
        "wires": [
            [
                "ed59489e0b1aba05"
            ]
        ]
    },
    {
        "id": "528696556a205fc9",
        "type": "hubitat device",
        "z": "f9337f21.0eab78",
        "d": true,
        "deviceLabel": "Porch Rainbow Toggle",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "545",
        "attribute": "switch",
        "sendEvent": true,
        "x": 300,
        "y": 3520,
        "wires": [
            [
                "115a5f6176d9706f"
            ]
        ]
    },
    {
        "id": "5d3933e8fba9abec",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "is rainbow mode enabled?",
        "property": "rainbow_enabled",
        "propertyType": "flow",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 900,
        "y": 3400,
        "wires": [
            [
                "c63d476daa70e7fc"
            ],
            []
        ]
    },
    {
        "id": "115a5f6176d9706f",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "is rainbow mode enabled?",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 560,
        "y": 3520,
        "wires": [
            [
                "7c87933da75f30c9"
            ],
            [
                "c95a82f5f9f4a570"
            ]
        ]
    },
    {
        "id": "7c87933da75f30c9",
        "type": "change",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "Enable Flow Rainbow",
        "rules": [
            {
                "t": "set",
                "p": "rainbow_enabled",
                "pt": "flow",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 3500,
        "wires": [
            []
        ]
    },
    {
        "id": "c95a82f5f9f4a570",
        "type": "change",
        "z": "f9337f21.0eab78",
        "d": true,
        "name": "Disable Flow Rainbow",
        "rules": [
            {
                "t": "set",
                "p": "rainbow_enabled",
                "pt": "flow",
                "to": "false",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 820,
        "y": 3540,
        "wires": [
            []
        ]
    },
    {
        "id": "402a7d3deb06c496",
        "type": "hubitat device",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Bedside Dimmer",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "3",
        "attribute": "",
        "sendEvent": true,
        "x": 190,
        "y": 1900,
        "wires": [
            [
                "6bdfa9b9923cae13"
            ]
        ]
    },
    {
        "id": "3a013e0170fbeff0",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "off",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 790,
        "y": 2080,
        "wires": [
            [
                "1f64cf98b7b984de"
            ]
        ]
    },
    {
        "id": "06f5cc186eb094f4",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "Turn On",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1140,
        "y": 1900,
        "wires": [
            [
                "1e3f611957300a48"
            ]
        ]
    },
    {
        "id": "5ae6d9c9a3efb51b",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Robs Bedside",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "554",
        "command": "",
        "commandArgs": "",
        "x": 1440,
        "y": 1960,
        "wires": [
            []
        ]
    },
    {
        "id": "69d03cb9650a7a36",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Leahs Bedside",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "1",
        "command": "",
        "commandArgs": "",
        "x": 1440,
        "y": 2000,
        "wires": [
            []
        ]
    },
    {
        "id": "6bdfa9b9923cae13",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "which button",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 410,
        "y": 1900,
        "wires": [
            [
                "4403b6bd78189a08"
            ],
            [
                "24bb8f272f701383"
            ],
            [
                "156fcd5f73bfc8b6"
            ],
            [
                "3a013e0170fbeff0"
            ]
        ]
    },
    {
        "id": "84150709b87b217b",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "40%",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "setLevel",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "40",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 790,
        "y": 1980,
        "wires": [
            [
                "4ea8f66c15b0c2e6"
            ]
        ]
    },
    {
        "id": "29f54d13e765e267",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Leahs Bedside",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "1",
        "command": "",
        "commandArgs": "",
        "x": 960,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "4ea8f66c15b0c2e6",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Robs Bedside",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "554",
        "command": "",
        "commandArgs": "",
        "x": 960,
        "y": 1960,
        "wires": [
            []
        ]
    },
    {
        "id": "6e8c902afa929ee3",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "off",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 790,
        "y": 2020,
        "wires": [
            [
                "29f54d13e765e267"
            ]
        ]
    },
    {
        "id": "4403b6bd78189a08",
        "type": "hubitat device",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Robs Bedside",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "554",
        "attribute": "switch",
        "sendEvent": false,
        "x": 820,
        "y": 1880,
        "wires": [
            [
                "63876624b5451920"
            ]
        ]
    },
    {
        "id": "63876624b5451920",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "is on",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "on",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 1880,
        "wires": [
            [
                "9d83d170a863c812"
            ],
            [
                "06f5cc186eb094f4"
            ]
        ]
    },
    {
        "id": "9d83d170a863c812",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "Set to 100%",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "setLevel",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "100",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1150,
        "y": 1860,
        "wires": [
            [
                "1e3f611957300a48"
            ]
        ]
    },
    {
        "id": "7bcf989a027b91b9",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "60%",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "setLevel",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "60",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 790,
        "y": 1940,
        "wires": [
            [
                "4ea8f66c15b0c2e6"
            ]
        ]
    },
    {
        "id": "51cd2c0885dc17a8",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "60%",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "setLevel",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "60",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 1560,
        "wires": [
            [
                "d52d8310f3f1401c"
            ]
        ]
    },
    {
        "id": "887dc8c1a970c922",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "decode lutron",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "5",
                "vt": "num"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 400,
        "y": 2060,
        "wires": [
            [
                "4403b6bd78189a08"
            ],
            [
                "24bb8f272f701383"
            ],
            [
                "156fcd5f73bfc8b6"
            ],
            [
                "3a013e0170fbeff0"
            ]
        ]
    },
    {
        "id": "8692bf2108c02adc",
        "type": "debug",
        "z": "f9337f21.0eab78",
        "name": "debug 6",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 340,
        "y": 1680,
        "wires": []
    },
    {
        "id": "a602bff24bc56b3b",
        "type": "hubitat device",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Robs 5 button",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "568",
        "attribute": "",
        "sendEvent": true,
        "x": 180,
        "y": 2060,
        "wires": [
            [
                "887dc8c1a970c922"
            ]
        ]
    },
    {
        "id": "e4990f4a210af893",
        "type": "hubitat device",
        "z": "f9337f21.0eab78",
        "deviceLabel": "5 button remote",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "566",
        "attribute": "",
        "sendEvent": true,
        "x": 140,
        "y": 1600,
        "wires": [
            [
                "16910248bf6af96e",
                "8692bf2108c02adc"
            ]
        ]
    },
    {
        "id": "3056b56b794db7b0",
        "type": "hubitat device",
        "z": "f9337f21.0eab78",
        "deviceLabel": "4btn",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "569",
        "attribute": "",
        "sendEvent": true,
        "x": 190,
        "y": 2380,
        "wires": [
            [
                "09cf1622ecf9cf30",
                "3fba8e81ee452836"
            ]
        ]
    },
    {
        "id": "09cf1622ecf9cf30",
        "type": "switch",
        "z": "f9337f21.0eab78",
        "name": "decode lutron",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "4",
                "vt": "num"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 400,
        "y": 2380,
        "wires": [
            [
                "cc92d72acf74153b"
            ],
            [
                "4c1fea3ce3b5fbb2"
            ],
            [
                "dfb306d8f4928e10"
            ],
            [
                "4dbaa3738332e358"
            ]
        ]
    },
    {
        "id": "56921e7715f04b33",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Leahs Bedside",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "1",
        "command": "",
        "commandArgs": "",
        "x": 900,
        "y": 2340,
        "wires": [
            []
        ]
    },
    {
        "id": "a627786208b7b083",
        "type": "hubitat command",
        "z": "f9337f21.0eab78",
        "deviceLabel": "Robs Bedside",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "554",
        "command": "",
        "commandArgs": "",
        "x": 900,
        "y": 2400,
        "wires": [
            []
        ]
    },
    {
        "id": "4c1fea3ce3b5fbb2",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "60%",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "setLevel",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "60",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 2340,
        "wires": [
            [
                "4f17c56984653df7"
            ]
        ]
    },
    {
        "id": "dfb306d8f4928e10",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "40%",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "setLevel",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "40",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 2380,
        "wires": [
            [
                "4f17c56984653df7"
            ]
        ]
    },
    {
        "id": "4dbaa3738332e358",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "off",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 2420,
        "wires": [
            [
                "4f17c56984653df7"
            ]
        ]
    },
    {
        "id": "cc92d72acf74153b",
        "type": "change",
        "z": "f9337f21.0eab78",
        "name": "60%",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "setLevel",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "60",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 2300,
        "wires": [
            [
                "4f17c56984653df7"
            ]
        ]
    },
    {
        "id": "3fba8e81ee452836",
        "type": "debug",
        "z": "f9337f21.0eab78",
        "name": "debug 8",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 340,
        "y": 2460,
        "wires": []
    },
    {
        "id": "734f4b605d12eb34",
        "type": "hubitat device",
        "z": "2984f0164b9bafb7",
        "deviceLabel": "Doorbell",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "195",
        "attribute": "",
        "sendEvent": true,
        "x": 390,
        "y": 400,
        "wires": [
            [
                "b35a3840dc40ef58"
            ]
        ]
    },
    {
        "id": "5f66bdf9a5df378e",
        "type": "hubitat device",
        "z": "2984f0164b9bafb7",
        "g": "83269420e2cb55e4",
        "deviceLabel": "Front Door",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "162",
        "attribute": "contact",
        "sendEvent": true,
        "x": 470,
        "y": 520,
        "wires": [
            [
                "ccc007c9c6a678ac"
            ]
        ]
    },
    {
        "id": "fcf3fde3acde20c4",
        "type": "hubitat device",
        "z": "2984f0164b9bafb7",
        "g": "83269420e2cb55e4",
        "deviceLabel": "Sunroom-Inside Door",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "196",
        "attribute": "contact",
        "sendEvent": true,
        "x": 500,
        "y": 580,
        "wires": [
            [
                "ccc007c9c6a678ac"
            ]
        ]
    },
    {
        "id": "ccc007c9c6a678ac",
        "type": "function",
        "z": "2984f0164b9bafb7",
        "g": "83269420e2cb55e4",
        "name": "open door tally",
        "func": "let status = null;\nlet openDoors = [];\n\nlet sensors = context.get(\"sensors\") || {};\nlet wasOpen = context.get(\"open\") || false;\nlet deviceId\n\nif (typeof msg.payload != \"undefined\" && msg.payload !== null) {\n    deviceId = msg.payload.deviceId;\n}\n\nif (typeof deviceId != \"undefined\") {\n\n    // If we didn't receive an event, the process was triggered by something else (eg. enabling the automation)\n    status = msg.payload.value\n\n    if (typeof sensors[deviceId] == \"undefined\") {\n        sensors[deviceId] = {}\n    }\n\n    let deviceObject = sensors[deviceId]\n\n    deviceObject.state = status\n    deviceObject.displayName = msg.topic\n\n    context.set(\"sensors\", sensors)\n}\n\n\nfor (let [deviceId, values] of Object.entries(sensors)) {\n    if (values.state == 'open') {\n        openDoors.push(values.displayName)\n    }\n}\n\nif (openDoors.length > 0) {\nnode.status({ text: `${openDoors.length}/${Object.entries(sensors).length} open` });\n} else {\n    node.status({ text: `all closed` });\n}\n\nlet newMessage = {\n    topic: env.get(\"Zone Name\"),\n    payload: {\n        anyOpen: openDoors.length > 0,\n        openCount: openDoors.length,\n        openDoors: openDoors\n    },\n}\n\ncontext.set(\"open\", openDoors.length > 0)\nreturn newMessage\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 540,
        "wires": [
            [
                "5fd3d630479d46fe"
            ]
        ]
    },
    {
        "id": "14a29f24f119cbfd",
        "type": "link out",
        "z": "2984f0164b9bafb7",
        "g": "83269420e2cb55e4",
        "name": "Exterior Door Cumulative Status",
        "mode": "link",
        "links": [
            "0143764a4fa79a37"
        ],
        "x": 1095,
        "y": 540,
        "wires": []
    },
    {
        "id": "5fd3d630479d46fe",
        "type": "rbe",
        "z": "2984f0164b9bafb7",
        "g": "83269420e2cb55e4",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": false,
        "property": "payload",
        "topi": "topic",
        "x": 950,
        "y": 540,
        "wires": [
            [
                "14a29f24f119cbfd"
            ]
        ]
    },
    {
        "id": "1988a394294549f4",
        "type": "inject",
        "z": "2984f0164b9bafb7",
        "g": "83269420e2cb55e4",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 305,
        "y": 560,
        "wires": [
            [
                "5f66bdf9a5df378e",
                "fcf3fde3acde20c4"
            ]
        ],
        "l": false
    },
    {
        "id": "76bb8e459c35d3a6",
        "type": "subflow:eaca82ad.4ed06",
        "z": "2984f0164b9bafb7",
        "name": "",
        "x": 830,
        "y": 400,
        "wires": []
    },
    {
        "id": "b35a3840dc40ef58",
        "type": "change",
        "z": "2984f0164b9bafb7",
        "name": "Someone is at the door!",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Someone is at the door.",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "sound",
                "pt": "msg",
                "to": "bike",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 400,
        "wires": [
            [
                "76bb8e459c35d3a6"
            ]
        ]
    },
    {
        "id": "8c649af674c27f6f",
        "type": "hubitat device",
        "z": "5ea7da533109f7d2",
        "deviceLabel": "Nursery Motion",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "296",
        "attribute": "temperature",
        "sendEvent": true,
        "x": 400,
        "y": 480,
        "wires": [
            [
                "7457eff1e3f141e1"
            ]
        ]
    },
    {
        "id": "9a9327868eb02b4e",
        "type": "switch",
        "z": "5ea7da533109f7d2",
        "name": "",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "heating",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 595,
        "y": 580,
        "wires": [
            [
                "6b912ff086e85cb7"
            ],
            [
                "610b115f9dc3dc4e"
            ]
        ],
        "l": false
    },
    {
        "id": "6b912ff086e85cb7",
        "type": "change",
        "z": "5ea7da533109f7d2",
        "name": "Turn On",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "on",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 560,
        "wires": [
            [
                "6fbf8d22ddf073c3"
            ]
        ]
    },
    {
        "id": "610b115f9dc3dc4e",
        "type": "change",
        "z": "5ea7da533109f7d2",
        "name": "Turn Off",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 600,
        "wires": [
            [
                "6fbf8d22ddf073c3"
            ]
        ]
    },
    {
        "id": "6fbf8d22ddf073c3",
        "type": "delay",
        "z": "5ea7da533109f7d2",
        "name": "",
        "pauseType": "rate",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "2",
        "nbRateUnits": "20",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 920,
        "y": 580,
        "wires": [
            [
                "5950004ab6e303e9"
            ]
        ]
    },
    {
        "id": "5950004ab6e303e9",
        "type": "hubitat command",
        "z": "5ea7da533109f7d2",
        "deviceLabel": "Nursery heater",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "295",
        "command": "",
        "commandArgs": "",
        "x": 1130,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "cb173b3098147468",
        "type": "hubitat device",
        "z": "5ea7da533109f7d2",
        "deviceLabel": "Nursery Thermostat",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "322",
        "attribute": "heatingSetpoint",
        "sendEvent": true,
        "x": 420,
        "y": 700,
        "wires": [
            [
                "a26351b2bceb8b82"
            ]
        ]
    },
    {
        "id": "2ead20e8deb4f948",
        "type": "inject",
        "z": "5ea7da533109f7d2",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 700,
        "wires": [
            [
                "cb173b3098147468"
            ]
        ]
    },
    {
        "id": "de7231c76864285d",
        "type": "hubitat device",
        "z": "5ea7da533109f7d2",
        "deviceLabel": "Nursery Heater",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "295",
        "attribute": "switch",
        "sendEvent": true,
        "x": 1140,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "9515e75687db36b1",
        "type": "hubitat command",
        "z": "5ea7da533109f7d2",
        "deviceLabel": "Nursery Thermostat",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "322",
        "command": "setTemperature",
        "commandArgs": "",
        "x": 940,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "7457eff1e3f141e1",
        "type": "change",
        "z": "5ea7da533109f7d2",
        "name": "Update Thermostat",
        "rules": [
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "payload.value",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 480,
        "wires": [
            [
                "9515e75687db36b1"
            ]
        ]
    },
    {
        "id": "a26351b2bceb8b82",
        "type": "change",
        "z": "5ea7da533109f7d2",
        "name": "Extract Set Temperature",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload.value",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 690,
        "y": 700,
        "wires": [
            [
                "b8a1a63fb158b24f",
                "d794772e8a432660"
            ]
        ]
    },
    {
        "id": "7770322aa3d56dd0",
        "type": "hubitat command",
        "z": "5ea7da533109f7d2",
        "deviceLabel": "Nursery Thermostat",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "322",
        "command": "setHeatingSetpoint",
        "commandArgs": "",
        "x": 1160,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "5093877f31b387c2",
        "type": "change",
        "z": "5ea7da533109f7d2",
        "name": "Update Heat Target",
        "rules": [
            {
                "t": "set",
                "p": "arguments",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 880,
        "wires": [
            [
                "7770322aa3d56dd0"
            ]
        ]
    },
    {
        "id": "4d6ef013dd52486d",
        "type": "inject",
        "z": "5ea7da533109f7d2",
        "name": "*/5min",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "300",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 580,
        "wires": [
            [
                "f224da5a176c0ec2"
            ]
        ]
    },
    {
        "id": "f224da5a176c0ec2",
        "type": "hubitat device",
        "z": "5ea7da533109f7d2",
        "deviceLabel": "Nursery Thermostat",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "322",
        "attribute": "thermostatOperatingState",
        "sendEvent": true,
        "x": 420,
        "y": 580,
        "wires": [
            [
                "9a9327868eb02b4e"
            ]
        ]
    },
    {
        "id": "ad44fab0d747c90d",
        "type": "inject",
        "z": "5ea7da533109f7d2",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 220,
        "y": 480,
        "wires": [
            [
                "8c649af674c27f6f"
            ]
        ]
    },
    {
        "id": "b8a1a63fb158b24f",
        "type": "change",
        "z": "5ea7da533109f7d2",
        "name": "Prep for archive",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t    \"name\": \"Nursery Thermostat\",\t    \"data\": payload,\t    \"unit\": \"F\",\t    \"metric\": \"thermostat\"\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 700,
        "wires": [
            [
                "47f6d47525adeb9b"
            ]
        ]
    },
    {
        "id": "47f6d47525adeb9b",
        "type": "link out",
        "z": "5ea7da533109f7d2",
        "name": "Nursury Thermostat Value",
        "mode": "link",
        "links": [
            "20a270b73ce8e3eb"
        ],
        "x": 1065,
        "y": 700,
        "wires": []
    },
    {
        "id": "be1037b9c1870d79",
        "type": "change",
        "z": "5ea7da533109f7d2",
        "name": "Sleeping Temp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "72",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 660,
        "y": 860,
        "wires": [
            [
                "5093877f31b387c2"
            ]
        ]
    },
    {
        "id": "2c57a01f74bab1f0",
        "type": "change",
        "z": "5ea7da533109f7d2",
        "name": "Not Sleeping Temp",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "65",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 670,
        "y": 920,
        "wires": [
            [
                "5093877f31b387c2"
            ]
        ]
    },
    {
        "id": "f5678ecdd5485f20",
        "type": "within-time-switch",
        "z": "5ea7da533109f7d2",
        "name": "",
        "nameInt": "",
        "positionConfig": "96c207ac.2237a8",
        "startTime": "18:00",
        "startTimeType": "entered",
        "startOffset": 0,
        "startOffsetType": "none",
        "startOffsetMultiplier": 60000,
        "endTime": "7:00",
        "endTimeType": "entered",
        "endOffset": 0,
        "endOffsetType": "none",
        "endOffsetMultiplier": 60000,
        "timeRestrictions": 0,
        "timeRestrictionsType": "none",
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "propertyStart": "",
        "propertyStartType": "none",
        "propertyStartCompare": "true",
        "propertyStartThreshold": "",
        "propertyStartThresholdType": "num",
        "startTimeAlt": "",
        "startTimeAltType": "entered",
        "startOffsetAlt": 0,
        "startOffsetAltType": "none",
        "startOffsetAltMultiplier": 60000,
        "propertyEnd": "",
        "propertyEndType": "none",
        "propertyEndCompare": "true",
        "propertyEndThreshold": "",
        "propertyEndThresholdType": "num",
        "endTimeAlt": "",
        "endTimeAltType": "entered",
        "endOffsetAlt": 0,
        "endOffsetAltType": "none",
        "endOffsetAltMultiplier": 60000,
        "withinTimeValue": "true",
        "withinTimeValueType": "msgInput",
        "outOfTimeValue": "false",
        "outOfTimeValueType": "msgInput",
        "tsCompare": "0",
        "x": 410,
        "y": 800,
        "wires": [
            [
                "be1037b9c1870d79"
            ],
            []
        ]
    },
    {
        "id": "207b3028d768f770",
        "type": "inject",
        "z": "5ea7da533109f7d2",
        "name": "12pm",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 12 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 860,
        "wires": [
            [
                "cf2f830a031481ed"
            ]
        ]
    },
    {
        "id": "cf2f830a031481ed",
        "type": "delay",
        "z": "5ea7da533109f7d2",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 275,
        "y": 880,
        "wires": [
            [
                "f5678ecdd5485f20",
                "866b6a36ffb6fe3b",
                "c05a83ef8e072485",
                "21b8df838d261e07"
            ]
        ],
        "l": false
    },
    {
        "id": "866b6a36ffb6fe3b",
        "type": "within-time-switch",
        "z": "5ea7da533109f7d2",
        "name": "",
        "nameInt": "",
        "positionConfig": "96c207ac.2237a8",
        "startTime": "12:00",
        "startTimeType": "entered",
        "startOffset": 0,
        "startOffsetType": "none",
        "startOffsetMultiplier": 60000,
        "endTime": "14:00",
        "endTimeType": "entered",
        "endOffset": 0,
        "endOffsetType": "none",
        "endOffsetMultiplier": 60000,
        "timeRestrictions": 0,
        "timeRestrictionsType": "none",
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "propertyStart": "",
        "propertyStartType": "none",
        "propertyStartCompare": "true",
        "propertyStartThreshold": "",
        "propertyStartThresholdType": "num",
        "startTimeAlt": "",
        "startTimeAltType": "entered",
        "startOffsetAlt": 0,
        "startOffsetAltType": "none",
        "startOffsetAltMultiplier": 60000,
        "propertyEnd": "",
        "propertyEndType": "none",
        "propertyEndCompare": "true",
        "propertyEndThreshold": "",
        "propertyEndThresholdType": "num",
        "endTimeAlt": "",
        "endTimeAltType": "entered",
        "endOffsetAlt": 0,
        "endOffsetAltType": "none",
        "endOffsetAltMultiplier": 60000,
        "withinTimeValue": "true",
        "withinTimeValueType": "msgInput",
        "outOfTimeValue": "false",
        "outOfTimeValueType": "msgInput",
        "tsCompare": "0",
        "x": 410,
        "y": 920,
        "wires": [
            [
                "be1037b9c1870d79"
            ],
            []
        ]
    },
    {
        "id": "c05a83ef8e072485",
        "type": "within-time-switch",
        "z": "5ea7da533109f7d2",
        "name": "",
        "nameInt": "",
        "positionConfig": "96c207ac.2237a8",
        "startTime": "14:00",
        "startTimeType": "entered",
        "startOffset": 0,
        "startOffsetType": "none",
        "startOffsetMultiplier": 60000,
        "endTime": "18:00",
        "endTimeType": "entered",
        "endOffset": 0,
        "endOffsetType": "none",
        "endOffsetMultiplier": 60000,
        "timeRestrictions": 0,
        "timeRestrictionsType": "none",
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "propertyStart": "",
        "propertyStartType": "none",
        "propertyStartCompare": "true",
        "propertyStartThreshold": "",
        "propertyStartThresholdType": "num",
        "startTimeAlt": "",
        "startTimeAltType": "entered",
        "startOffsetAlt": 0,
        "startOffsetAltType": "none",
        "startOffsetAltMultiplier": 60000,
        "propertyEnd": "",
        "propertyEndType": "none",
        "propertyEndCompare": "true",
        "propertyEndThreshold": "",
        "propertyEndThresholdType": "num",
        "endTimeAlt": "",
        "endTimeAltType": "entered",
        "endOffsetAlt": 0,
        "endOffsetAltType": "none",
        "endOffsetAltMultiplier": 60000,
        "withinTimeValue": "true",
        "withinTimeValueType": "msgInput",
        "outOfTimeValue": "false",
        "outOfTimeValueType": "msgInput",
        "tsCompare": "0",
        "x": 410,
        "y": 980,
        "wires": [
            [
                "2c57a01f74bab1f0"
            ],
            []
        ]
    },
    {
        "id": "21b8df838d261e07",
        "type": "within-time-switch",
        "z": "5ea7da533109f7d2",
        "name": "",
        "nameInt": "",
        "positionConfig": "96c207ac.2237a8",
        "startTime": "7:00",
        "startTimeType": "entered",
        "startOffset": 0,
        "startOffsetType": "none",
        "startOffsetMultiplier": 60000,
        "endTime": "12:00",
        "endTimeType": "entered",
        "endOffset": 0,
        "endOffsetType": "none",
        "endOffsetMultiplier": 60000,
        "timeRestrictions": 0,
        "timeRestrictionsType": "none",
        "timeDays": "*",
        "timeOnlyOddDays": false,
        "timeOnlyEvenDays": false,
        "timeOnlyOddWeeks": false,
        "timeOnlyEvenWeeks": false,
        "timeMonths": "*",
        "timedatestart": "",
        "timedateend": "",
        "propertyStart": "",
        "propertyStartType": "none",
        "propertyStartCompare": "true",
        "propertyStartThreshold": "",
        "propertyStartThresholdType": "num",
        "startTimeAlt": "",
        "startTimeAltType": "entered",
        "startOffsetAlt": 0,
        "startOffsetAltType": "none",
        "startOffsetAltMultiplier": 60000,
        "propertyEnd": "",
        "propertyEndType": "none",
        "propertyEndCompare": "true",
        "propertyEndThreshold": "",
        "propertyEndThresholdType": "num",
        "endTimeAlt": "",
        "endTimeAltType": "entered",
        "endOffsetAlt": 0,
        "endOffsetAltType": "none",
        "endOffsetAltMultiplier": 60000,
        "withinTimeValue": "true",
        "withinTimeValueType": "msgInput",
        "outOfTimeValue": "false",
        "outOfTimeValueType": "msgInput",
        "tsCompare": "0",
        "x": 410,
        "y": 860,
        "wires": [
            [
                "2c57a01f74bab1f0"
            ],
            []
        ]
    },
    {
        "id": "7aa9def8d34a3e64",
        "type": "inject",
        "z": "5ea7da533109f7d2",
        "name": "7am",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 07 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 820,
        "wires": [
            [
                "cf2f830a031481ed"
            ]
        ]
    },
    {
        "id": "2d781397117ae518",
        "type": "inject",
        "z": "5ea7da533109f7d2",
        "name": "6pm",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 18 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 940,
        "wires": [
            [
                "cf2f830a031481ed"
            ]
        ]
    },
    {
        "id": "5e46a0effa23ad0b",
        "type": "inject",
        "z": "5ea7da533109f7d2",
        "name": "2pm",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "00 14 * * *",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 900,
        "wires": [
            [
                "cf2f830a031481ed"
            ]
        ]
    },
    {
        "id": "d794772e8a432660",
        "type": "ui_chart",
        "z": "5ea7da533109f7d2",
        "name": "",
        "group": "e735a89b7a9ee10c",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "chart",
        "chartType": "line",
        "legend": "false",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "",
        "ymax": "",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 890,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "0143764a4fa79a37",
        "type": "link in",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "Disable HVAC based on exterior doors",
        "links": [
            "14a29f24f119cbfd"
        ],
        "x": 225,
        "y": 1640,
        "wires": [
            [
                "7752bf1acef47bed",
                "5c6e34be82fe0618"
            ]
        ]
    },
    {
        "id": "522ca8033f93cc49",
        "type": "switch",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "are any doors open?",
        "property": "payload.anyOpen",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 440,
        "y": 1640,
        "wires": [
            [
                "fc570f7299eb205c"
            ],
            [
                "3eb370d603c80f68"
            ]
        ],
        "outputLabels": [
            "Yes",
            "No"
        ]
    },
    {
        "id": "d0beae73fc634098",
        "type": "change",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "Turn on HVAC",
        "rules": [
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "auto",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 1700,
        "wires": [
            [
                "17055fb592980387"
            ]
        ]
    },
    {
        "id": "ec8c43b734b488bd",
        "type": "change",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "Turn off HVAC",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "command",
                "pt": "msg",
                "to": "off",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1310,
        "y": 1600,
        "wires": [
            [
                "17055fb592980387"
            ]
        ]
    },
    {
        "id": "63a4250f7ea57a4c",
        "type": "hubitat command",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "deviceLabel": "Ecobee",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "deviceId": "552",
        "command": "",
        "commandArgs": "",
        "x": 1530,
        "y": 1660,
        "wires": [
            []
        ]
    },
    {
        "id": "14f0cde26c936f8c",
        "type": "inject",
        "z": "5ea7da533109f7d2",
        "g": "33e506e537a0af84",
        "name": "Off",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1155,
        "y": 1800,
        "wires": [
            [
                "ec8c43b734b488bd"
            ]
        ],
        "outputLabels": [
            "Off"
        ],
        "icon": "font-awesome/fa-toggle-off",
        "l": false
    },
    {
        "id": "89a094886fec2498",
        "type": "inject",
        "z": "5ea7da533109f7d2",
        "g": "33e506e537a0af84",
        "name": "On",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1225,
        "y": 1800,
        "wires": [
            [
                "d0beae73fc634098"
            ]
        ],
        "icon": "font-awesome/fa-toggle-on",
        "l": false
    },
    {
        "id": "cdcebad23752ae23",
        "type": "delay",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "",
        "pauseType": "delay",
        "timeout": "12",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 790,
        "y": 1600,
        "wires": [
            [
                "f462e420c508034e"
            ]
        ]
    },
    {
        "id": "7752bf1acef47bed",
        "type": "change",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "Discard pending messages",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "true",
                "tot": "bool"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 1480,
        "wires": [
            [
                "bd0d74f29ece1dcd"
            ]
        ]
    },
    {
        "id": "be08985bac81bcb1",
        "type": "debug",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "debug 4",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "command",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1530,
        "y": 1580,
        "wires": []
    },
    {
        "id": "e8d25bbe2111ea4c",
        "type": "delay",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 790,
        "y": 1460,
        "wires": [
            [
                "91531534703e670d"
            ]
        ]
    },
    {
        "id": "91531534703e670d",
        "type": "change",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "Doors Open!",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "(\t   payload.openCount = 1 ? \"The \" & payload.openDoors[0] & \" door is open,\" : \"The doors are open,\"\t) & \" HVAC will shut off in 2 minutes.\"",
                "tot": "jsonata"
            },
            {
                "t": "set",
                "p": "sound",
                "pt": "msg",
                "to": "falling",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 950,
        "y": 1460,
        "wires": [
            [
                "77fd588680815925"
            ]
        ]
    },
    {
        "id": "77fd588680815925",
        "type": "subflow:1090998370659d02",
        "z": "5ea7da533109f7d2",
        "d": true,
        "g": "dbe1dc0e31a5fb56",
        "name": "",
        "x": 1110,
        "y": 1460,
        "wires": []
    },
    {
        "id": "ad803091f2f4400c",
        "type": "inject",
        "z": "5ea7da533109f7d2",
        "g": "c8062adaf3fbf8cf",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 825,
        "y": 1340,
        "wires": [
            [
                "91531534703e670d"
            ]
        ],
        "l": false
    },
    {
        "id": "e22bc785bf7b0520",
        "type": "inject",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "System Reset",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 460,
        "y": 1340,
        "wires": [
            [
                "2648b0e2f1734710"
            ]
        ]
    },
    {
        "id": "7e946ef4a2d3c2fe",
        "type": "link in",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "Discard Pending Messages",
        "links": [
            "9f224061934e409c",
            "2648b0e2f1734710"
        ],
        "x": 245,
        "y": 1480,
        "wires": [
            [
                "7752bf1acef47bed"
            ]
        ]
    },
    {
        "id": "2648b0e2f1734710",
        "type": "link out",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "link out 2",
        "mode": "link",
        "links": [
            "7e946ef4a2d3c2fe"
        ],
        "x": 585,
        "y": 1340,
        "wires": []
    },
    {
        "id": "f462e420c508034e",
        "type": "hubitat device",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "deviceLabel": "EcobeeTherm: My ecobee",
        "name": "Current Mode",
        "server": "252d4ef4.c14b6a",
        "deviceId": "552",
        "attribute": "thermostatMode",
        "sendEvent": false,
        "x": 970,
        "y": 1600,
        "wires": [
            [
                "65181a2e8282575e"
            ]
        ]
    },
    {
        "id": "fb7a5616028de8b7",
        "type": "hubitat device",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "deviceLabel": "EcobeeTherm: My ecobee",
        "name": "Current Mode",
        "server": "252d4ef4.c14b6a",
        "deviceId": "552",
        "attribute": "thermostatMode",
        "sendEvent": false,
        "x": 970,
        "y": 1700,
        "wires": [
            [
                "cc53a25038807fc2",
                "3f71a14071503991"
            ]
        ]
    },
    {
        "id": "65181a2e8282575e",
        "type": "switch",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "is on?",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "auto",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1140,
        "y": 1600,
        "wires": [
            [
                "ec8c43b734b488bd"
            ]
        ],
        "outputLabels": [
            "Yes"
        ]
    },
    {
        "id": "cc53a25038807fc2",
        "type": "switch",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "is off?",
        "property": "payload.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "auto",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1140,
        "y": 1700,
        "wires": [
            [
                "d0beae73fc634098"
            ]
        ],
        "outputLabels": [
            "Yes"
        ]
    },
    {
        "id": "3f71a14071503991",
        "type": "debug",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "debug 5",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1130,
        "y": 1660,
        "wires": []
    },
    {
        "id": "5c6e34be82fe0618",
        "type": "delay",
        "z": "5ea7da533109f7d2",
        "g": "dbe1dc0e31a5fb56",
        "name": "",
        "pauseType": "delay",
        "timeout": "50",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 305,
        "y": 1640,
        "wires": [
            [
                "522ca8033f93cc49"
            ]
        ],
        "l": false
    },
    {
        "id": "bf11becc09f647d3",
        "type": "switch",
        "z": "3cee340729aa7e67",
        "name": "event type",
        "property": "payload.name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "contact",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "temperature",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "battery",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "switch",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "motion",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "door",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "thermostatSetpoint",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "thermostatOperatingState",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "colorTemperature",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "colorName",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "power",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "level",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 13,
        "x": 290,
        "y": 360,
        "wires": [
            [
                "c56bc16fed4fd11e"
            ],
            [
                "400956638eb16c17"
            ],
            [
                "e5045ed819a795e7"
            ],
            [
                "b1f93bc7bca948da"
            ],
            [
                "6a9fe7a6fd325567"
            ],
            [
                "7f80854d1d776741"
            ],
            [
                "1c42aebc9d17efa0"
            ],
            [
                "559425603edc131c"
            ],
            [
                "94dab35dcc9b2e8e"
            ],
            [
                "7c0145dfeba3639c"
            ],
            [
                "fcbb2333d4396516"
            ],
            [
                "9f7670ebd87c5f63"
            ],
            [
                "7ab4d3bb0b23307a"
            ]
        ]
    },
    {
        "id": "6657c34fc5526365",
        "type": "hubitat event",
        "z": "3cee340729aa7e67",
        "name": "",
        "server": "252d4ef4.c14b6a",
        "x": 130,
        "y": 360,
        "wires": [
            [
                "bf11becc09f647d3"
            ]
        ]
    },
    {
        "id": "7ab4d3bb0b23307a",
        "type": "debug",
        "z": "3cee340729aa7e67",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 590,
        "y": 640,
        "wires": []
    },
    {
        "id": "c7e8d0fe127ac669",
        "type": "postgresql",
        "z": "3cee340729aa7e67",
        "d": true,
        "name": "-> metrics",
        "query": "INSERT INTO \"public\".\"historical_metrics\"\n(\"name\", \"metric\", \"units\", \"data\")\nVALUES(\n  '{{{ msg.payload.name }}}',\n  '{{{ msg.payload.metric }}}',\n  '{{{ msg.payload.unit }}}',\n  {{{ msg.payload.data }}}\n)",
        "postgreSQLConfig": "21b7c61d0303ac49",
        "split": true,
        "rowsPerMsg": 1,
        "outputs": 1,
        "x": 650,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "9b53e8934f167062",
        "type": "delay",
        "z": "3cee340729aa7e67",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 470,
        "y": 900,
        "wires": [
            [
                "c7e8d0fe127ac669"
            ]
        ]
    },
    {
        "id": "20a270b73ce8e3eb",
        "type": "link in",
        "z": "3cee340729aa7e67",
        "name": "New Metric Insert",
        "links": [
            "e16cf27bcb6da70f",
            "47f6d47525adeb9b",
            "5129b82d1a8558d7"
        ],
        "x": 235,
        "y": 900,
        "wires": [
            [
                "9b53e8934f167062",
                "222cf76ed6febdf8"
            ]
        ]
    },
    {
        "id": "c56bc16fed4fd11e",
        "type": "change",
        "z": "3cee340729aa7e67",
        "name": "contact sensor",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t    \"name\": payload.displayName,\t    \"data\": payload.value = \"open\" ? 1 : 0,\t    \"unit\": \"openness\",\t    \"metric\": payload.name\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 160,
        "wires": [
            [
                "e16cf27bcb6da70f"
            ]
        ]
    },
    {
        "id": "e16cf27bcb6da70f",
        "type": "link out",
        "z": "3cee340729aa7e67",
        "name": "Bulk Sensor Aggregate",
        "mode": "link",
        "links": [
            "20a270b73ce8e3eb"
        ],
        "x": 915,
        "y": 340,
        "wires": []
    },
    {
        "id": "222cf76ed6febdf8",
        "type": "debug",
        "z": "3cee340729aa7e67",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 370,
        "y": 860,
        "wires": []
    },
    {
        "id": "400956638eb16c17",
        "type": "change",
        "z": "3cee340729aa7e67",
        "name": "temperature",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t    \"name\": payload.displayName,\t    \"data\": payload.value,\t    \"unit\": payload.unit,\t    \"metric\": payload.name\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 200,
        "wires": [
            [
                "e16cf27bcb6da70f"
            ]
        ]
    },
    {
        "id": "e5045ed819a795e7",
        "type": "change",
        "z": "3cee340729aa7e67",
        "name": "battery",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t    \"name\": payload.displayName,\t    \"data\": payload.value,\t    \"unit\": payload.unit,\t    \"metric\": payload.name\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 240,
        "wires": [
            [
                "e16cf27bcb6da70f"
            ]
        ]
    },
    {
        "id": "b1f93bc7bca948da",
        "type": "change",
        "z": "3cee340729aa7e67",
        "name": "switch",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t    \"name\": payload.displayName,\t    \"data\": payload.value = \"on\" ? 1 : 0,\t    \"unit\": \"power\",\t    \"metric\": payload.name\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 280,
        "wires": [
            [
                "e16cf27bcb6da70f"
            ]
        ]
    },
    {
        "id": "6a9fe7a6fd325567",
        "type": "change",
        "z": "3cee340729aa7e67",
        "name": "motion",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t    \"name\": payload.displayName,\t    \"data\": payload.value = \"active\" ? 1 : 0,\t    \"unit\": \"activity\",\t    \"metric\": payload.name\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 320,
        "wires": [
            [
                "e16cf27bcb6da70f"
            ]
        ]
    },
    {
        "id": "7f80854d1d776741",
        "type": "change",
        "z": "3cee340729aa7e67",
        "name": "door",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t    \"name\": payload.displayName,\t    \"data\": payload.value = \"open\" ? 1 : 0,\t    \"unit\": \"openness\",\t    \"metric\": payload.name\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 360,
        "wires": [
            [
                "e16cf27bcb6da70f"
            ]
        ]
    },
    {
        "id": "1c42aebc9d17efa0",
        "type": "change",
        "z": "3cee340729aa7e67",
        "name": "Thermostat Setting",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\t    \"name\": payload.displayName,\t    \"data\": payload.value,\t    \"unit\": \"F\",\t    \"metric\": payload.name\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 400,
        "wires": [
            [
                "e16cf27bcb6da70f"
            ]
        ]
    },
    {
        "id": "559425603edc131c",
        "type": "change",
        "z": "3cee340729aa7e67",
        "name": "Thermostat Mode",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "/* 1 = heating\t * 2 = cooling\t * 0 = doing nonthing\t */\t{\t    \"name\": payload.displayName,\t    \"data\": payload.value = \"heating\" ? 1 : 0,\t    \"unit\": \"hvac_activity\",\t    \"metric\": payload.name\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 440,
        "wires": [
            [
                "e16cf27bcb6da70f"
            ]
        ]
    },
    {
        "id": "94dab35dcc9b2e8e",
        "type": "change",
        "z": "3cee340729aa7e67",
        "d": true,
        "name": "Color Temperature",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "/* 1 = heating\t * 2 = cooling\t * 0 = doing nonthing\t */\t{\t    \"name\": payload.displayName,\t    \"data\": payload.value = \"heating\" ? 1 : 0,\t    \"unit\": \"hvac_activity\",\t    \"metric\": payload.name\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "7c0145dfeba3639c",
        "type": "change",
        "z": "3cee340729aa7e67",
        "d": true,
        "name": "Color Name",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "/* 1 = heating\t * 2 = cooling\t * 0 = doing nonthing\t */\t{\t    \"name\": payload.displayName,\t    \"data\": payload.value = \"heating\" ? 1 : 0,\t    \"unit\": \"hvac_activity\",\t    \"metric\": payload.name\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "6dcee357469bde7e",
        "type": "debug",
        "z": "3cee340729aa7e67",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 590,
        "y": 120,
        "wires": []
    },
    {
        "id": "fcbb2333d4396516",
        "type": "change",
        "z": "3cee340729aa7e67",
        "name": "Energy report",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "/* \t *\t\t{\t   \"name\":\"power\",\t   \"value\":\"1406\",\t   \"displayName\":\"Shoffice Repeater Plug\",\t   \"deviceId\":\"546\",\t   \"descriptionText\":\"Shoffice Repeater Plug power is 1406W\",\t   \"unit\":\"W\",\t   \"type\":null,\t   \"data\":null\t}\t*/\t{\t   \"name\": payload.displayName,\t   \"data\": payload.value,\t   \"unit\": \"watts\",\t   \"metric\": payload.name\t}",
                "tot": "jsonata"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 560,
        "wires": [
            [
                "e16cf27bcb6da70f"
            ]
        ]
    },
    {
        "id": "9f7670ebd87c5f63",
        "type": "change",
        "z": "3cee340729aa7e67",
        "d": true,
        "name": "Light Level",
        "rules": [],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 600,
        "wires": [
            []
        ]
    }
]